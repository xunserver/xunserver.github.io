<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>bang</title>
  
  <subtitle>生活总会有惊喜</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.xunserver.cn/"/>
  <updated>2020-03-18T01:34:43.000Z</updated>
  <id>https://blog.xunserver.cn/</id>
  
  <author>
    <name>yangmanman</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>三次握手四次挥手的奇怪理解</title>
    <link href="https://blog.xunserver.cn/archives/6c3aac24.html"/>
    <id>https://blog.xunserver.cn/archives/6c3aac24.html</id>
    <published>2020-03-18T01:34:43.000Z</published>
    <updated>2020-03-18T01:34:43.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h2><ol><li>向妹子招手(SYN=1, seq = X)</li><li>妹子回应(ACK=X+1) (此时你知道妹子回应你，你知道妹子的意思了) 并通知向你招手(seq=Y syn =1)</li><li>你回应妹子的招手(ACK=Y+1, seq = Z) (此时妹子也知道你的意思了)</li></ol><h2 id="四次挥手"><a href="#四次挥手" class="headerlink" title="四次挥手"></a>四次挥手</h2><p>主动方: FIN=1 ACK=Z seq=X<br>被动方: ACK=X+1 seq=Z<br>被动方：FIN=1 ACK=X seq=Y;<br>主动方：ACK=Y seq=X</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;三次握手&quot;&gt;&lt;a href=&quot;#三次握手&quot; class=&quot;headerlink&quot; title=&quot;三次握手&quot;&gt;&lt;/a&gt;三次握手&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;向妹子招手(SYN=1, seq = X)&lt;/li&gt;
&lt;li&gt;妹子回应(ACK=X+1) (此时你知道妹子回应你
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>垂直居中</title>
    <link href="https://blog.xunserver.cn/archives/a1ccf0ca.html"/>
    <id>https://blog.xunserver.cn/archives/a1ccf0ca.html</id>
    <published>2020-03-18T01:03:55.000Z</published>
    <updated>2020-03-18T01:03:55.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="父元素高度已知-子元素高度未知"><a href="#父元素高度已知-子元素高度未知" class="headerlink" title="父元素高度已知, 子元素高度未知"></a>父元素高度已知, 子元素高度未知</h2><h2 id="line-height-vertical-align"><a href="#line-height-vertical-align" class="headerlink" title="line-height + vertical-align"></a>line-height + vertical-align</h2><ol><li>父元素高度和 line-height 一致</li></ol><h2 id="父元素高度已知，子元素高度已知"><a href="#父元素高度已知，子元素高度已知" class="headerlink" title="父元素高度已知，子元素高度已知"></a>父元素高度已知，子元素高度已知</h2><h3 id="position-absolute-和-margin-top-50"><a href="#position-absolute-和-margin-top-50" class="headerlink" title="position: absolute 和 margin-top: -50%"></a>position: absolute 和 margin-top: -50%</h3><h3 id="position-absolute-和-transform-translateY-50"><a href="#position-absolute-和-transform-translateY-50" class="headerlink" title="position: absolute 和 transform: translateY: -50%;"></a>position: absolute 和 transform: translateY: -50%;</h3><h3 id="position-absolute-top-0-bottom-0-margin-auto"><a href="#position-absolute-top-0-bottom-0-margin-auto" class="headerlink" title="position: absolute; top: 0; bottom: 0 ; margin: auto"></a>position: absolute; top: 0; bottom: 0 ; margin: auto</h3><h2 id="父元素高度未知-子元素高度未知"><a href="#父元素高度未知-子元素高度未知" class="headerlink" title="父元素高度未知, 子元素高度未知"></a>父元素高度未知, 子元素高度未知</h2><h3 id="align-item-center"><a href="#align-item-center" class="headerlink" title="align-item: center;"></a>align-item: center;</h3><h3 id="table-table-cell"><a href="#table-table-cell" class="headerlink" title="table table-cell"></a>table table-cell</h3><h3 id="grid-align-items-center"><a href="#grid-align-items-center" class="headerlink" title="grid align-items:center;"></a>grid align-items:center;</h3>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;父元素高度已知-子元素高度未知&quot;&gt;&lt;a href=&quot;#父元素高度已知-子元素高度未知&quot; class=&quot;headerlink&quot; title=&quot;父元素高度已知, 子元素高度未知&quot;&gt;&lt;/a&gt;父元素高度已知, 子元素高度未知&lt;/h2&gt;&lt;h2 id=&quot;line-height
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>passport学习</title>
    <link href="https://blog.xunserver.cn/archives/b4605e3d.html"/>
    <id>https://blog.xunserver.cn/archives/b4605e3d.html</id>
    <published>2020-03-13T11:06:00.000Z</published>
    <updated>2020-03-13T11:06:00.000Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>开发中学习nest.js</title>
    <link href="https://blog.xunserver.cn/archives/65be6a2e.html"/>
    <id>https://blog.xunserver.cn/archives/65be6a2e.html</id>
    <published>2020-03-12T08:39:59.000Z</published>
    <updated>2020-03-12T08:39:59.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="新建配置服务"><a href="#新建配置服务" class="headerlink" title="新建配置服务"></a>新建配置服务</h2><p>安装依赖</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm i -S dotenv</span><br><span class="line">npm i -D @types/dotenv</span><br><span class="line">npm install -S @hapi/joi</span><br><span class="line">npm install -D @types/hapi__joi</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// config.service.ts</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> dotenv <span class="keyword">from</span> <span class="string">"dotenv"</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> fs <span class="keyword">from</span> <span class="string">"fs"</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> Joi <span class="keyword">from</span> <span class="string">"@hapi/joi"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> configSchema = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> EnvConfig = Record&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> ConfigService &#123;</span><br><span class="line">  <span class="keyword">private</span> readonly envConfig: Record&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;</span><br><span class="line">  <span class="comment">// 配置的合并顺序</span></span><br><span class="line">  <span class="comment">// .env.[type].local =&gt; .env.[type] =&gt; .env</span></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">filePath?: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (filePath) &#123;</span><br><span class="line">      <span class="keyword">this</span>.envConfig = dotenv.parse(fs.readFileSync(filePath))</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 读取默认配置 .env</span></span><br><span class="line">      <span class="comment">// 读取[type].env 配置</span></span><br><span class="line">      <span class="comment">// 读取 local.[type].env配置</span></span><br><span class="line">      <span class="keyword">let</span> defaultEnvConfig</span><br><span class="line">      <span class="keyword">let</span> typeEnvConfig = &#123;&#125;</span><br><span class="line">      <span class="keyword">let</span> localEnvConfig = &#123;&#125;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        defaultEnvConfig = dotenv.parse(fs.readFileSync(<span class="string">".env"</span>))</span><br><span class="line">        typeEnvConfig = dotenv.parse(</span><br><span class="line">          fs.readFileSync(<span class="string">`<span class="subst">$&#123;process.env.NODE_ENV&#125;</span>.env`</span>)</span><br><span class="line">        )</span><br><span class="line">        localEnvConfig = dotenv.parse(</span><br><span class="line">          fs.readFileSync(<span class="string">`local.<span class="subst">$&#123;process.env.NODE_ENV&#125;</span>.env`</span>)</span><br><span class="line">        )</span><br><span class="line">      &#125; <span class="keyword">catch</span> (err) &#123;&#125;</span><br><span class="line">      <span class="keyword">if</span> (!defaultEnvConfig) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"默认配置文件未找到!"</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.envConfig = <span class="built_in">Object</span>.assign(</span><br><span class="line">        defaultEnvConfig,</span><br><span class="line">        typeEnvConfig,</span><br><span class="line">        localEnvConfig</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// todo</span></span><br><span class="line">    <span class="comment">// this.envConfig = this.validateConfig(this.envConfig);</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> validateConfig(envConfig: EnvConfig): EnvConfig &#123;</span><br><span class="line">    <span class="keyword">const</span> envVarSchema: Joi.ObjectSchema = Joi.object(configSchema)</span><br><span class="line">    <span class="keyword">const</span> &#123; error, value: validateEnvConfig &#125; = envVarSchema.validate(envConfig)</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"配置文件验证出错"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> validateEnvConfig</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span>(key: <span class="built_in">string</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.envConfig[key]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// config.module.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; Module &#125; <span class="keyword">from</span> <span class="string">"@nestjs/common"</span></span><br><span class="line"><span class="keyword">import</span> &#123; ConfigService &#125; <span class="keyword">from</span> <span class="string">"./config.service"</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">  providers: [</span><br><span class="line">    &#123;</span><br><span class="line">      provide: ConfigService,</span><br><span class="line">      useValue: <span class="keyword">new</span> ConfigService()</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  exports: [ConfigService]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> ConfigModule &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// .env</span></span><br><span class="line">PORT = <span class="number">3000</span></span><br></pre></td></tr></table></figure><p>注册到全局模块</p><h2 id="mysql-typeorm-集成"><a href="#mysql-typeorm-集成" class="headerlink" title="mysql typeorm 集成"></a>mysql typeorm 集成</h2><h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -S @nestjs/typeorm typeorm mysql</span><br></pre></td></tr></table></figure><p>###</p><h2 id="mysql-typeorm-curd-集成"><a href="#mysql-typeorm-curd-集成" class="headerlink" title="mysql typeorm curd 集成"></a>mysql typeorm curd 集成</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i --save @nestjsx/crud @nestjsx/crud-typeorm class-transformer class-validator</span><br></pre></td></tr></table></figure><h2 id="默认情况下-module-是单列的，意味着模块中-提供者也是单列"><a href="#默认情况下-module-是单列的，意味着模块中-提供者也是单列" class="headerlink" title="默认情况下 module 是单列的，意味着模块中 提供者也是单列"></a>默认情况下 module 是单列的，意味着模块中 提供者也是单列</h2><h2 id="认证"><a href="#认证" class="headerlink" title="认证"></a>认证</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save @nestjs/passport passport passport-local</span><br><span class="line">npm install --save-dev @types/passport-local</span><br></pre></td></tr></table></figure><h2 id="JWT-功能"><a href="#JWT-功能" class="headerlink" title="JWT 功能"></a>JWT 功能</h2><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> i -S @nestjs/jwt passport-jwt</span><br><span class="line"><span class="built_in">npm</span> i -S @types/passport-jwt</span><br></pre></td></tr></table></figure><h2 id="请求的执行顺序"><a href="#请求的执行顺序" class="headerlink" title="请求的执行顺序"></a>请求的执行顺序</h2><p>客户端请求 —&gt; 中间件 —&gt; 守卫 —&gt; 拦截器之前 —&gt; 管道 —&gt; 控制器处理并响应 —&gt; 拦截器之后 —&gt; 过滤器</p><p>重点：在示例给出了它们的写法，注意全局管道、守卫、过滤器和拦截器，只能 new，全局中间件是纯函数，全局管道、守卫、过滤器和拦截器，中间件都不能依赖注入。中间件模块注册也不能用 new，可以依赖注入。管道、守卫、过滤器和拦截器局部注册可以使用 new 和类名，除了管道以为其他都可以依赖注入。拦截器和守卫可以写成高阶方法来传参，达到定制目的</p><h2 id="泛型中-amp-是啥意思"><a href="#泛型中-amp-是啥意思" class="headerlink" title="泛型中&amp;是啥意思"></a>泛型中&amp;是啥意思</h2><p>&amp;指的是并集类型， | 指的是交集类型</p><h2 id="别人的项目结构"><a href="#别人的项目结构" class="headerlink" title="别人的项目结构"></a>别人的项目结构</h2><p>main.ts 入口<br>main.hmr.ts 热更新入口<br>app.service.ts APP 服务（选择）<br>app.module.ts APP 模块（根模块，必须）<br>app.controller.ts APP 控制器（选择）<br>app.controller.spec.ts APP 控制器单元测试用例（选择）<br>config 配置模块<br>core 核心模块（申明过滤器、管道、拦截器、守卫、中间件、全局模块）<br>feature 特性模块（主要业务模块）<br>shared 共享模块（共享 mongodb、redis 封装服务、通用服务）<br>tools</p><h2 id="装饰器的集中写法"><a href="#装饰器的集中写法" class="headerlink" title="装饰器的集中写法"></a>装饰器的集中写法</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">type</span> ClassDecorator = &lt;TFunction <span class="keyword">extends</span> <span class="built_in">Function</span>&gt;(</span><br><span class="line">  target: TFunction</span><br><span class="line">) =&gt; TFunction | <span class="built_in">void</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">type</span> PropertyDecorator = (</span><br><span class="line">  target: <span class="built_in">Object</span>,</span><br><span class="line">  propertyKey: <span class="built_in">string</span> | symbol</span><br><span class="line">) =&gt; <span class="built_in">void</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">type</span> MethodDecorator = &lt;T&gt;(</span><br><span class="line">  target: <span class="built_in">Object</span>,</span><br><span class="line">  propertyKey: <span class="built_in">string</span> | symbol,</span><br><span class="line">  descriptor: TypedPropertyDescriptor&lt;T&gt;</span><br><span class="line">) =&gt; TypedPropertyDescriptor&lt;T&gt; | <span class="built_in">void</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">type</span> ParameterDecorator = (</span><br><span class="line">  target: <span class="built_in">Object</span>,</span><br><span class="line">  propertyKey: <span class="built_in">string</span> | symbol,</span><br><span class="line">  parameterIndex: <span class="built_in">number</span></span><br><span class="line">) =&gt; <span class="built_in">void</span></span><br></pre></td></tr></table></figure><h2 id="动态模块中-service-如何被注册到其他动态模块上"><a href="#动态模块中-service-如何被注册到其他动态模块上" class="headerlink" title="动态模块中 service 如何被注册到其他动态模块上"></a>动态模块中 service 如何被注册到其他动态模块上</h2><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">configModule</span> 是个动态模块， 现在需要注册到typeormModule 上面</span><br></pre></td></tr></table></figure><h2 id="采坑记录"><a href="#采坑记录" class="headerlink" title="采坑记录"></a>采坑记录</h2><h3 id="ConfigModule-不能读取-module-目录下的-json-配置文件"><a href="#ConfigModule-不能读取-module-目录下的-json-配置文件" class="headerlink" title="ConfigModule 不能读取 module 目录下的 json 配置文件"></a>ConfigModule 不能读取 module 目录下的 json 配置文件</h3><p>开发代码都在 src 里，生成代码在 dist (打包自动编译)，typescript 打包只会编译 ts 到 dist 下，静态文件 public 和模板 views 不会移动，所以需要放到根目录下， 同理，配置 json 需要放在根目录下。</p><p>#</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;新建配置服务&quot;&gt;&lt;a href=&quot;#新建配置服务&quot; class=&quot;headerlink&quot; title=&quot;新建配置服务&quot;&gt;&lt;/a&gt;新建配置服务&lt;/h2&gt;&lt;p&gt;安装依赖&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;t
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>面试中工作的难点回答</title>
    <link href="https://blog.xunserver.cn/archives/f3386bcb.html"/>
    <id>https://blog.xunserver.cn/archives/f3386bcb.html</id>
    <published>2020-03-12T07:58:48.000Z</published>
    <updated>2020-03-12T07:58:48.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="parseInt-在安卓电视盒子上面的问题"><a href="#parseInt-在安卓电视盒子上面的问题" class="headerlink" title="parseInt 在安卓电视盒子上面的问题"></a>parseInt 在安卓电视盒子上面的问题</h2><p>没有指定第二参数，把<code>08</code> 变成了 <code>0</code></p><h2 id="在不支持-Promise-的情况下，怎么和-iframe-通信"><a href="#在不支持-Promise-的情况下，怎么和-iframe-通信" class="headerlink" title="在不支持 Promise 的情况下，怎么和 iframe 通信"></a>在不支持 Promise 的情况下，怎么和 iframe 通信</h2><h2 id="如何实现最多两行展示，超出两行的使用查看更多-，而且有过渡动画"><a href="#如何实现最多两行展示，超出两行的使用查看更多-，而且有过渡动画" class="headerlink" title="如何实现最多两行展示，超出两行的使用查看更多 ，而且有过渡动画"></a>如何实现最多两行展示，超出两行的使用查看更多 ，而且有过渡动画</h2><h2 id="为什么跳槽"><a href="#为什么跳槽" class="headerlink" title="为什么跳槽"></a>为什么跳槽</h2><p>原来单位比较求稳，我是一个追求进步的人，想寻找更有发展的平台，办法突破自身职业发展的瓶颈<br>贵司的某某产品/某某文化令我心生仰慕。我对公司企业文化特别向往，希望可以加入</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;parseInt-在安卓电视盒子上面的问题&quot;&gt;&lt;a href=&quot;#parseInt-在安卓电视盒子上面的问题&quot; class=&quot;headerlink&quot; title=&quot;parseInt 在安卓电视盒子上面的问题&quot;&gt;&lt;/a&gt;parseInt 在安卓电视盒子上面的问题&lt;/
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>开发中学习typescript</title>
    <link href="https://blog.xunserver.cn/archives/71eabda7.html"/>
    <id>https://blog.xunserver.cn/archives/71eabda7.html</id>
    <published>2020-03-12T03:00:06.000Z</published>
    <updated>2020-03-12T03:00:06.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Record-类型"><a href="#Record-类型" class="headerlink" title="Record 类型"></a>Record 类型</h2><p>将一个类型的所有属性值都映射到另一个类型上并创造一个新的类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Record&lt;k <span class="keyword">extends</span> keyof <span class="built_in">any</span>, T&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> K]: T</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> petsGroup = <span class="string">"dog"</span> | <span class="string">"cat"</span> | <span class="string">"fish"</span></span><br><span class="line"><span class="keyword">interface</span> IPetInfo &#123;</span><br><span class="line">  name: <span class="built_in">string</span></span><br><span class="line">  age: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> IPets = Record&lt;petsGroup, IPetInfo&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  IPets = &#123;</span></span><br><span class="line"><span class="comment"> *     dog: IPetInfo</span></span><br><span class="line"><span class="comment"> *     cat: IPetInfo</span></span><br><span class="line"><span class="comment"> *     fish: IPetInfo</span></span><br><span class="line"><span class="comment"> *  &#125;</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> animalsInfo: IPets = &#123;</span><br><span class="line">  dog: &#123;</span><br><span class="line">    name: <span class="string">"dogName"</span>,</span><br><span class="line">    age: <span class="number">2</span></span><br><span class="line">  &#125;,</span><br><span class="line">  cat: &#123;</span><br><span class="line">    name: <span class="string">"catName"</span>,</span><br><span class="line">    age: <span class="number">3</span></span><br><span class="line">  &#125;,</span><br><span class="line">  fish: &#123;</span><br><span class="line">    name: <span class="string">"fishName"</span>,</span><br><span class="line">    age: <span class="number">5</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="联合类型"><a href="#联合类型" class="headerlink" title="联合类型"></a>联合类型</h2><p>一个值可以是几种类型之一<br>如果一个值是联合类型，我们只能访问此联合类型的所有类型里共有的成员。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> unionType = <span class="built_in">number</span> | <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Bird &#123;</span><br><span class="line">  fly()</span><br><span class="line">  layEggs()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Fish &#123;</span><br><span class="line">  swim()</span><br><span class="line">  layEggs()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Animal = Bird | Fish</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPet</span>(<span class="params"></span>): <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (xxx) &#123;</span><br><span class="line">    <span class="keyword">return</span> bird</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> fish</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> pet = getPet()</span><br><span class="line">pet.fly() <span class="comment">// error</span></span><br></pre></td></tr></table></figure><h2 id="类型保护与区分类型"><a href="#类型保护与区分类型" class="headerlink" title="类型保护与区分类型"></a>类型保护与区分类型</h2><h2 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h2><p>枚举是 enum 关键定义的数据</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> enumVar = &#123;</span><br><span class="line">  x,</span><br><span class="line">  y</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// enumVar.x = 0</span></span><br><span class="line"><span class="comment">// enumVar[0] = 'x'</span></span><br><span class="line"><span class="keyword">enum</span> enumVar = &#123;</span><br><span class="line">  x = <span class="string">'x'</span></span><br><span class="line">  y = <span class="string">'y'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// enumVar.x = 'x'</span></span><br><span class="line"><span class="comment">// enumVar['x'] = 'x'</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Record-类型&quot;&gt;&lt;a href=&quot;#Record-类型&quot; class=&quot;headerlink&quot; title=&quot;Record 类型&quot;&gt;&lt;/a&gt;Record 类型&lt;/h2&gt;&lt;p&gt;将一个类型的所有属性值都映射到另一个类型上并创造一个新的类型&lt;/p&gt;
&lt;figure
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>严格模式</title>
    <link href="https://blog.xunserver.cn/archives/7108a574.html"/>
    <id>https://blog.xunserver.cn/archives/7108a574.html</id>
    <published>2020-03-09T02:05:43.000Z</published>
    <updated>2020-03-09T02:05:43.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><p>“use strict” 指令只允许出现在脚本或函数的开头。推荐在函数定义中开头放置 ‘use strict’ ，而不是在脚本开头</p><h2 id="为什么要使用严格模式"><a href="#为什么要使用严格模式" class="headerlink" title="为什么要使用严格模式"></a>为什么要使用严格模式</h2><p>消除 Javascript 语法的一些不合理、不严谨之处，减少一些怪异行为;</p><ul><li>消除代码运行的一些不安全之处，保证代码运行的安全；</li><li>提高编译器效率，增加运行速度；</li><li>为未来新版本的 Javascript 做好铺垫。</li></ul><p><code>严格模式</code>体现了 Javascript 更合理、更安全、更严谨的发展方向，包括 IE 10 在内的主流浏览器，都已经支持它，许多大项目已经开始全面拥抱它。</p><p>另一方面，同样的代码，在<code>严格模式</code>中，可能会有不一样的运行结果；一些在”正常模式”下可以运行的语句，在<code>严格模式</code>下将不能运行。掌握这些内容，有助于更细致深入地理解 Javascript，让你变成一个更好的程序员。</p><h2 id="规则"><a href="#规则" class="headerlink" title="规则"></a>规则</h2><ol><li>this 的指向不再默认指向 全局</li><li>不允许删除变量、对象、函数</li><li>不能使用 8 进制， 转义字符串</li><li>不能使用 with； eval 是沙盒模式</li><li>保留一些关键字</li><li>禁止使用 arguments.callee</li></ol><h2 id="开发中如何规范"><a href="#开发中如何规范" class="headerlink" title="开发中如何规范"></a>开发中如何规范</h2><p>使用 eslint 等静态代码检查工具，提前扫描。</p><h2 id="常用套路"><a href="#常用套路" class="headerlink" title="常用套路"></a>常用套路</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">window</span>) </span>&#123;</span><br><span class="line"><span class="meta">  "use strict"</span>; <span class="comment">// 防止合并代码代码导致严格模式失效的情况</span></span><br><span class="line">&#125;)(<span class="built_in">window</span>);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;如何使用&quot;&gt;&lt;a href=&quot;#如何使用&quot; class=&quot;headerlink&quot; title=&quot;如何使用&quot;&gt;&lt;/a&gt;如何使用&lt;/h2&gt;&lt;p&gt;“use strict” 指令只允许出现在脚本或函数的开头。推荐在函数定义中开头放置 ‘use strict’ ，而不是在脚
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>代码盒子</title>
    <link href="https://blog.xunserver.cn/archives/2aa90bba.html"/>
    <id>https://blog.xunserver.cn/archives/2aa90bba.html</id>
    <published>2020-03-08T23:41:51.000Z</published>
    <updated>2020-03-08T23:41:51.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Array-prototype-sort"><a href="#Array-prototype-sort" class="headerlink" title="Array.prototype.sort"></a>Array.prototype.sort</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>].sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b); <span class="comment">// 1,3,4</span></span><br><span class="line">[<span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>].sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b - a); <span class="comment">// 4,3,1</span></span><br></pre></td></tr></table></figure><h2 id="currying-柯里化函数"><a href="#currying-柯里化函数" class="headerlink" title="currying 柯里化函数"></a>currying 柯里化函数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">currying</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 通用的柯里化函数</span></span><br><span class="line">  <span class="keyword">var</span> args = [];</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> fn.apply(<span class="keyword">this</span>, args);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      args.push(<span class="built_in">arguments</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">arguments</span>.callee;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cost = currying(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> len = <span class="built_in">arguments</span>.length;</span><br><span class="line">  <span class="keyword">while</span> (len--) &#123;</span><br><span class="line">    result += <span class="built_in">arguments</span>[len][<span class="number">0</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> len;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="惰性代码"><a href="#惰性代码" class="headerlink" title="惰性代码"></a>惰性代码</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isEnterKey</span>(<span class="params">keyCode</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> finalCode;</span><br><span class="line">  <span class="comment">// 遥控器 确认按键</span></span><br><span class="line">  <span class="keyword">if</span> (keyCode === <span class="number">13</span> || keyCode === <span class="number">14</span>) &#123;</span><br><span class="line">    finalCode = keyCode;</span><br><span class="line">    isEnterKey = <span class="function"><span class="keyword">function</span>(<span class="params">keyCode</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> finalCode === keyCode;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="addEventListener-兼容优化写法"><a href="#addEventListener-兼容优化写法" class="headerlink" title="addEventListener 兼容优化写法"></a>addEventListener 兼容优化写法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params">element, eventName, callback, options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (element.addEventListener) &#123;</span><br><span class="line">    <span class="comment">// 重写函数</span></span><br><span class="line">    addEvent = <span class="function"><span class="keyword">function</span>(<span class="params">element, eventName, callback, options</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> element.addEventListener(eventName, callback, options);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.attachEvent) &#123;</span><br><span class="line">    addEvent = <span class="function"><span class="keyword">function</span>(<span class="params">element, eventName, callback, options</span>) </span>&#123;</span><br><span class="line">      element.attachEvent(<span class="string">"on"</span> + eventName, callback, options);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    addEvent = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      element[<span class="string">"on"</span> + eventName] = callback;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  addEvent(element, eventName, callback, options);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>同理解绑函数也是同上</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_off</span>(<span class="params">el, event, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (el.removeEventListener) &#123;</span><br><span class="line">    el.removeEventListener(event, fn, <span class="literal">false</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (el.detachEvent) &#123;</span><br><span class="line">    el.detachEvent(<span class="string">"on"</span> + event, fn.bind(el));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    el[<span class="string">"on"</span> + event] = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="为元素添加-on-和-trgger-方法"><a href="#为元素添加-on-和-trgger-方法" class="headerlink" title="为元素添加 on 和 trgger 方法"></a>为元素添加 on 和 trgger 方法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// on</span></span><br><span class="line">Element.prototype.on = Element.prototype.addEventListener;</span><br><span class="line">NodeList.prototype.on = <span class="function"><span class="keyword">function</span>(<span class="params">event, fn</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">Array</span>.prototype.forEach.call(<span class="keyword">this</span>, el =&gt; &#123;</span><br><span class="line">    el.on(event, fn);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// trigger</span></span><br></pre></td></tr></table></figure><h2 id="使用代理的单例模式"><a href="#使用代理的单例模式" class="headerlink" title="使用代理的单例模式"></a>使用代理的单例模式</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Man</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createSingleClass</span>(<span class="params">Fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> instance;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">newFn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> <span class="keyword">instanceof</span> newFn) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!instance) &#123;</span><br><span class="line">        instance = <span class="keyword">new</span> Fn(...arguments);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="翻转数字"><a href="#翻转数字" class="headerlink" title="翻转数字"></a>翻转数字</h2><p>12345 =&gt; 54321</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reverserNumber</span>(<span class="params">number</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> newNumber = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (number &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> pop = number % <span class="number">10</span>;</span><br><span class="line">    number = <span class="built_in">Math</span>.floor(number / <span class="number">10</span>);</span><br><span class="line">    newNumber = newNumber * <span class="number">10</span> + pop;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newNumber;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="找到第一个未重复的字符"><a href="#找到第一个未重复的字符" class="headerlink" title="找到第一个未重复的字符"></a>找到第一个未重复的字符</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findFirstNumber</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> i = <span class="number">-1</span>,</span><br><span class="line">    s;</span><br><span class="line">  <span class="keyword">while</span> ((s = str[++i])) &#123;</span><br><span class="line">    <span class="keyword">if</span> (str.lastIndexOf(s) === i) &#123;</span><br><span class="line">      <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="限制并发数并尽快的完成任务"><a href="#限制并发数并尽快的完成任务" class="headerlink" title="限制并发数并尽快的完成任务"></a>限制并发数并尽快的完成任务</h2><p>需要上传多张，要求尽快的上传完成，但是同时上传的格式为 m</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadImg</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;url&#125;</span> is loaded`</span>);</span><br><span class="line">      resolve(url);</span><br><span class="line">    &#125;, url * <span class="number">100</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// promise 版本</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">limitLoadAwait</span>(<span class="params">urls, handler, limit</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> sequence = [].concat(urls);</span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">let</span> promises = sequence.splice(<span class="number">0</span>, limit).map(<span class="keyword">async</span> (url, index) =&gt; &#123;</span><br><span class="line">    result.push(<span class="keyword">await</span> handler(url));</span><br><span class="line">    <span class="keyword">return</span> index;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">await</span> sequence.reduce(<span class="keyword">async</span> (pCollect, url, currentIndex) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> pCollect;</span><br><span class="line">    <span class="keyword">let</span> fastIndex = <span class="keyword">await</span> <span class="built_in">Promise</span>.race(promises);</span><br><span class="line"></span><br><span class="line">    promises[fastIndex] = handler(url).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      result.push(res);</span><br><span class="line">      <span class="keyword">return</span> fastIndex;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> promises;</span><br><span class="line">  &#125;, <span class="built_in">Promise</span>.resolve());</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> <span class="built_in">Promise</span>.all(promises);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// async await 版本</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">limitLoadAwait</span>(<span class="params">urls, handler, limit</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> sequence = [].concat(urls);</span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">let</span> promises = sequence.splice(<span class="number">0</span>, limit).map(<span class="keyword">async</span> (url, index) =&gt; &#123;</span><br><span class="line">    result.push(<span class="keyword">await</span> handler(url));</span><br><span class="line">    <span class="keyword">return</span> index;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">await</span> sequence.reduce(<span class="keyword">async</span> (pCollect, url, currentIndex) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> pCollect;</span><br><span class="line">    <span class="keyword">let</span> fastIndex = <span class="keyword">await</span> <span class="built_in">Promise</span>.race(promises);</span><br><span class="line"></span><br><span class="line">    promises[fastIndex] = handler(url).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      result.push(res);</span><br><span class="line">      <span class="keyword">return</span> fastIndex;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> promises;</span><br><span class="line">  &#125;, <span class="built_in">Promise</span>.resolve());</span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> <span class="built_in">Promise</span>.all(promises);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="巧妙结合-promise-和-reduce"><a href="#巧妙结合-promise-和-reduce" class="headerlink" title="巧妙结合 promise 和 reduce"></a>巧妙结合 promise 和 reduce</h2><p>需要连续调用三个接口， 如果接口返回 true，继续调用下个接口。直到返回 false 或者到末尾</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uploadImg</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      resolve(url);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uploadOneByOne</span>(<span class="params">urls, handler</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> urls.reduce(<span class="function">(<span class="params">p, url</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> p.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (res) &#123;</span><br><span class="line">        <span class="keyword">return</span> handler(url);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(<span class="literal">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, <span class="built_in">Promise</span>.resolve(<span class="literal">true</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">uploadOneByOne([<span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">true</span>], uploadImg).then(<span class="built_in">console</span>.log);</span><br></pre></td></tr></table></figure><p>上述方法缺点是不能提前跳出</p><h2 id="循环队列的思考和实现"><a href="#循环队列的思考和实现" class="headerlink" title="循环队列的思考和实现"></a>循环队列的思考和实现</h2><p>传统方式实现队列, 借助数组的 pop 和 unshift 方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Queue</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _data = [];</span><br><span class="line">  <span class="keyword">this</span>.enQueue = <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    _data.push(value);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">this</span>.deQueue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> _data.unshift();</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这种方法的弊端是每次入队出队都需要挪动整个队列。<br>考虑引入头部指针和尾指针</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Queue</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _data = [];</span><br><span class="line">  <span class="keyword">var</span> head = <span class="number">0</span>,</span><br><span class="line">    tail = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">this</span>.enQueue = <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    _data[head++] = value;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">this</span>.deQueue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (_data.length === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"队列为空"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> _data[tail++];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这种策略空间换时间的方案，长时间使用后会溢出。所以有循环队列的方案</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Queue</span>(<span class="params">initLength</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _data = <span class="keyword">new</span> <span class="built_in">Array</span>(initLength),</span><br><span class="line">    tail = <span class="number">-1</span>,</span><br><span class="line">    head = <span class="number">-1</span>,</span><br><span class="line">    length = <span class="number">0</span>;</span><br><span class="line">  dataLength = initLength;</span><br><span class="line">  <span class="keyword">this</span>.enQueue = <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value, head, tail);</span><br><span class="line">    <span class="keyword">if</span> (length === dataLength) &#123;</span><br><span class="line">      <span class="comment">// 溢出</span></span><br><span class="line">      <span class="keyword">this</span>.resetQueue();</span><br><span class="line">    &#125;</span><br><span class="line">    head = (head + <span class="number">1</span>) % dataLength;</span><br><span class="line">    _data[head] = value;</span><br><span class="line">    length++;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">this</span>.deQueue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (length === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"empty"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    tail = (tail + <span class="number">1</span>) % dataLength;</span><br><span class="line">    length--;</span><br><span class="line">    <span class="keyword">var</span> result = _data[tail];</span><br><span class="line">    _data[tail] = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">this</span>.resetQueue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 扩容</span></span><br><span class="line">    dataLength = dataLength * <span class="number">2</span>;</span><br><span class="line">    _data.length = dataLength;</span><br><span class="line">    <span class="comment">// 如果</span></span><br><span class="line">    <span class="keyword">if</span> (head &lt; tail) &#123;</span><br><span class="line">      <span class="keyword">var</span> headList = _data.splice(<span class="number">0</span>, head + <span class="number">1</span>);</span><br><span class="line">      _data.splice(tail, <span class="number">0</span>, ...headList);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">this</span>.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(_data);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>动态的去扩大长度，还有 deQueue 应该动态减少长度</p><h2 id="经典算法-洗牌算法"><a href="#经典算法-洗牌算法" class="headerlink" title="经典算法-洗牌算法"></a>经典算法-洗牌算法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shuffleArray</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> len = arr.length;</span><br><span class="line">  <span class="keyword">while</span> (len--) &#123;</span><br><span class="line">    <span class="keyword">var</span> index = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * len);</span><br><span class="line">    [arr[index], arr[len]] = [arr[len], arr[index]];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Array-prototype-sort&quot;&gt;&lt;a href=&quot;#Array-prototype-sort&quot; class=&quot;headerlink&quot; title=&quot;Array.prototype.sort&quot;&gt;&lt;/a&gt;Array.prototype.sort&lt;/h2&gt;&lt;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>前端误区</title>
    <link href="https://blog.xunserver.cn/archives/a2e48826.html"/>
    <id>https://blog.xunserver.cn/archives/a2e48826.html</id>
    <published>2020-02-24T09:41:42.000Z</published>
    <updated>2020-02-24T09:41:42.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="引用值作为属性名情况"><a href="#引用值作为属性名情况" class="headerlink" title="引用值作为属性名情况"></a>引用值作为属性名情况</h2><p>先 toString 再 valueOf，使用独一无二的 key 使用 symbol</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;&#125;</span><br><span class="line"><span class="keyword">var</span> b = &#123;&#125;</span><br><span class="line">b[a] = <span class="number">123</span></span><br><span class="line">b[a] === a[<span class="string">"[object object]"</span>] <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="constructor-误区"><a href="#constructor-误区" class="headerlink" title="constructor 误区"></a>constructor 误区</h2><p>constructor 是继承的构造函数的 prototype.constructor 属性。<br>对象的__proto__属性指向函数的 <code>prototype</code> 属性。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 原型链继承</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Woman</span>(<span class="params">sex</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.sex = sex</span><br><span class="line">&#125;</span><br><span class="line">Woman.prototype = <span class="keyword">new</span> Person(<span class="string">"yan"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> woman1 = <span class="keyword">new</span> Woman(<span class="string">"female"</span>)</span><br><span class="line">woman1.sayName() <span class="comment">// yan</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* --------------------------------- */</span></span><br><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Man</span>(<span class="params">name, sex</span>) </span>&#123;</span><br><span class="line">  Person.call(<span class="keyword">this</span>, name)</span><br><span class="line">  <span class="keyword">this</span>.sex = sex</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> man1 = <span class="keyword">new</span> Man(<span class="string">"xun"</span>, <span class="string">"male"</span>)</span><br><span class="line">man1.sayName() <span class="comment">// error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 组合继承</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Man</span>(<span class="params">name, sex</span>) </span>&#123;</span><br><span class="line">  Person.call(<span class="keyword">this</span>, name)</span><br><span class="line">  <span class="keyword">this</span>.sex = sex</span><br><span class="line">&#125;</span><br><span class="line">Man.prototype = <span class="keyword">new</span> Person() <span class="comment">// 问题 Man.prototype.contructor === Person    man1.contructor !== Man</span></span><br><span class="line">Man.prototype.contructor = Man <span class="comment">// 修正 contructor, 修复instanceOf</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> man1 = <span class="keyword">new</span> Man(<span class="string">"xun"</span>, <span class="string">"fale"</span>)</span><br><span class="line">man1.sayName() <span class="comment">// xun</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 原型式继承</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">extend1</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 等价于 Object.create(o)</span></span><br><span class="line">  <span class="keyword">let</span> Fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  Fn.prototype = o</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Fn()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br></pre></td></tr></table></figure><h2 id="let-const-和-var-绑定变量的区别"><a href="#let-const-和-var-绑定变量的区别" class="headerlink" title="let const 和 var 绑定变量的区别"></a>let const 和 var 绑定变量的区别</h2><p>区别是 let const 不会绑定在 window 上面。 var 会。 还有严格模式下函数中的 this 模式不会指向 window</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.a) <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">2</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.b) <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><h2 id="this-永远指向最后调用它的那个对象"><a href="#this-永远指向最后调用它的那个对象" class="headerlink" title="this 永远指向最后调用它的那个对象"></a>this 永远指向最后调用它的那个对象</h2><p><code>a.b.c()</code> c 中 this 指向的是 b，除了显示调用 this，其余都是</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a)</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.a)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">foo.call(obj)()</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2   // 还是指向的window</span></span><br></pre></td></tr></table></figure><h2 id="函数作为参数可以这样写"><a href="#函数作为参数可以这样写" class="headerlink" title="函数作为参数可以这样写"></a>函数作为参数可以这样写</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">typeof</span> fn)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test(</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.a)</span><br><span class="line">  &#125;.call(&#123; <span class="attr">a</span>: <span class="number">1</span> &#125;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><h2 id="setTimeout-使用-undefined-作为参数的情况"><a href="#setTimeout-使用-undefined-作为参数的情况" class="headerlink" title="setTimeout 使用 undefined 作为参数的情况"></a>setTimeout 使用 undefined 作为参数的情况</h2><p>什么也不会发生</p><h2 id="箭头函数-this-问题"><a href="#箭头函数-this-问题" class="headerlink" title="箭头函数 this 问题"></a>箭头函数 this 问题</h2><p>里面的 this 是由外层作用域来决定的，且指向函数定义时的 this 而非执行时。 <code>ps 这句话是错误的， 应该从函数调用栈的观点来看待</code></p><p>箭头函数中没有 this 绑定，必须通过查找作用域链来决定其值，如果箭头函数被非箭头函数包含，则 this 绑定的是最近一层非箭头函数的 this，否则，this 为 undefined</p><p>特殊例子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">"obj"</span>,</span><br><span class="line">  foo1: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">  &#125;,</span><br><span class="line">  foo2: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"window"</span></span><br><span class="line"></span><br><span class="line">obj.foo2.call(&#123; <span class="attr">name</span>: <span class="number">3</span> &#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"><span class="comment">// 所以箭头函数的this 应该是执行时向父作用域的this看齐。 执行代码是应该是加上父作用域的执行情况</span></span><br></pre></td></tr></table></figure><p>箭头函数的 this 不能通过 bind,apply,call 来更改，因为箭头函数自身没有 this，依赖的是父作用域中的 this，所以只能通过修改父作用域来修改 this。</p><p>更加的迷惑的行为</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"window"</span></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">  name: <span class="string">"obj1"</span>,</span><br><span class="line">  foo1: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  foo2: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">  name: <span class="string">"obj2"</span></span><br><span class="line">&#125;</span><br><span class="line">obj1.foo1.call(obj2)() <span class="comment">// obj2 obj2</span></span><br><span class="line">obj1.foo1().call(obj2) <span class="comment">// obj1 obj1  迷惑： 因为返回箭头函数，所以形成了闭包， 需要再次引用父作用域的this</span></span><br><span class="line">obj1.foo2.call(obj2)() <span class="comment">// window window</span></span><br><span class="line">obj1.foo2().call(obj2) <span class="comment">// window obj2</span></span><br></pre></td></tr></table></figure><h2 id="浏览器端-even-loop-执行顺序"><a href="#浏览器端-even-loop-执行顺序" class="headerlink" title="浏览器端 even loop 执行顺序"></a>浏览器端 even loop 执行顺序</h2><ol><li>一开始整个脚本作为一个宏任务执行</li><li>执行中，同步代码直接执行，宏任务进入宏任务队列， 微任务进入本次宏任务的微任务队列</li><li>宏任务执行，微任务执行</li><li>UI 线程 渲染进行</li><li>web worker 进行</li><li>重复第二点</li></ol><p>宏任务包括 script 、setTimeout、setInterval 、setImmediate 、I/O 、UI rendering</p><p>微任务包括 promise.then process.nextTick MutationObserver</p><p>微任务会被添加到本次宏任务的末尾， 而宏任务会到下一次执行</p><h2 id="promise-误区"><a href="#promise-误区" class="headerlink" title="promise 误区"></a>promise 误区</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">  resolve(<span class="string">"success"</span>) <span class="comment">// 如果promise 没有 resolve   .then 不会生效。 打印结果是 1 2 4</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">&#125;)</span><br><span class="line">promise.then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 2 4 3</span></span><br></pre></td></tr></table></figure><p>一开始进入宏队列</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"1"</span>)</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 放入下一个宏队列</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"2"</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 属于本次宏任务的微任务</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"3"</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"4"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 4 3 2</span></span><br></pre></td></tr></table></figure><h2 id="影响性能的可能因素"><a href="#影响性能的可能因素" class="headerlink" title="影响性能的可能因素"></a>影响性能的可能因素</h2><ol><li>=== 性能优于 !== if 语句都需要化简为===</li><li>while 循环性能优于 for 养成 while 循环的好习惯 <code>while(len--)</code></li><li>不能使用<code>++a</code>, 性能比直接先++ 弱</li></ol><h2 id="charAt-和-直接字符串下标的区别"><a href="#charAt-和-直接字符串下标的区别" class="headerlink" title="charAt 和 直接字符串下标的区别"></a>charAt 和 直接字符串下标的区别</h2><p>charAt 是 es3 方法， 下标是 es5+方法。 charAt 在越界时返回 “”。字符串下标会让人误以为是可写的。 实际不能写。</p><h2 id="promise-再次理解"><a href="#promise-再次理解" class="headerlink" title="promise 再次理解"></a>promise 再次理解</h2><p>先上结论</p><ol><li>Promise 的状态一经改变就不能再改变。</li><li>.then 和.catch 都会返回一个新的 Promise。catch 也会返回一个 resolve 状态的 Promise。如果 catch 没有抓到错， 也会返回一个新 promise，是调用 catch 的副本。同理上层有 reject 状态时，.then 也会一直返回一个 rejected 状态的副本</li><li>catch 不管被连接到哪里，都能捕获上层的错误。(见 3.2)</li><li>在 Promise 中，返回任意一个非 promise 的值都会被包裹成 promise 对象，例如 return 2 会被包装为 return Promise.resolve(2)。</li><li>Promise 的 .then 或者 .catch 可以被调用多次, 当如果 Promise 内部的状态一经改变，并且有了一个值，那么后续每次调用.then 或者.catch 的时候都会直接拿到该值。(见 3.5)</li><li>.then 或者 .catch 中 return 一个 error 对象并不会抛出错误，所以不会被后续的 .catch 捕获。(见 3.6)</li><li>.then 或 .catch 返回的值不能是 promise 本身，否则会造成死循环。(见 3.7)</li><li>.then 或者 .catch 的参数期望是函数，传入非函数则会发生值穿透。(见 3.8)</li><li>.then 方法是能接收两个参数的，第一个是处理成功的函数，第二个是处理失败的函数，再某些时候你可以认为 catch 是.then 第二个参数的简便写法。(见 3.9)</li><li>.finally 方法也是返回一个 Promise，他在 Promise 结束的时候，无论结果为 resolved 还是 rejected，都会执行里面的回调函数。</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 证明第二点 每次调用.then .catch 都是返回的新的promise，状态由上一个promise的状态决定 。除了.then 一个 rejected状态的promise返回rejected状态的promise，其余都返回resolved状态</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> promise(<span class="function"><span class="params">res</span> =&gt;</span> res(<span class="number">2</span>))</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// promise resolved:2</span></span><br><span class="line"><span class="keyword">var</span> b = a.then(<span class="built_in">console</span>.log) <span class="comment">// 2  promise resolved:2</span></span><br><span class="line"><span class="built_in">console</span>.log(b === a) <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// 同上个a</span></span><br><span class="line">b.then(<span class="built_in">console</span>.log) <span class="comment">// 2  promise resolved:2</span></span><br></pre></td></tr></table></figure><p>证明 catch 返回的 promise</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">Promise</span>.reject(<span class="number">2</span>) <span class="comment">// reject: 2</span></span><br><span class="line"><span class="keyword">var</span> b = a.catch(<span class="built_in">console</span>.log) <span class="comment">// 2    resolve： undifined</span></span><br><span class="line"><span class="keyword">var</span> c = a.then(<span class="built_in">console</span>.log)</span><br><span class="line"><span class="built_in">console</span>.log(c) <span class="comment">// reject: 2</span></span><br><span class="line"><span class="built_in">console</span>.log(c === a) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// resolve： undifined</span></span><br></pre></td></tr></table></figure><h2 id="验证返回的-promise-副本是深拷贝还是浅拷贝。"><a href="#验证返回的-promise-副本是深拷贝还是浅拷贝。" class="headerlink" title="验证返回的 promise 副本是深拷贝还是浅拷贝。"></a>验证返回的 promise 副本是深拷贝还是浅拷贝。</h2><p>下面例子证明是”浅拷贝”</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;&#125;</span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">Promise</span>.resolve(a);</span><br><span class="line"><span class="keyword">var</span> c = = b.catch().then(<span class="function"><span class="params">res</span>=&gt;</span><span class="built_in">console</span>.log(res===a)) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(b.catch() === b)  <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h2 id="promise-then-catch-参数非法的情况"><a href="#promise-then-catch-参数非法的情况" class="headerlink" title="promise .then .catch 参数非法的情况"></a>promise .then .catch 参数非法的情况</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve(<span class="number">1</span>)</span><br><span class="line">  .then(<span class="number">2</span>) <span class="comment">// 只生成副本</span></span><br><span class="line">  .then(<span class="built_in">Promise</span>.resolve(<span class="number">3</span>)) <span class="comment">// 只生成副本</span></span><br><span class="line">  .then(<span class="built_in">console</span>.log) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><h2 id="await-误区和正确阅读"><a href="#await-误区和正确阅读" class="headerlink" title="await 误区和正确阅读"></a>await 误区和正确阅读</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"async1 start"</span>)</span><br><span class="line">  <span class="keyword">await</span> async2()</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"async1 end"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"async2"</span>)</span><br><span class="line">&#125;</span><br><span class="line">async1()</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"start"</span>)</span><br><span class="line"><span class="comment">// 之前错误的观点 start =&gt; async1 start" =&gt; async2 =&gt; async1 end</span></span><br><span class="line"><span class="comment">// 实际运行结果 async1 start =&gt; async2 =&gt; start =&gt; async2</span></span><br></pre></td></tr></table></figure><p>所以可以理解为 await 函数是当前函数.then 的一个语法糖。 然后 async 理解成一个 promise 的封装，所以 await 需要是 resolved 或者 rejected 状态的才行。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// pending 状态的。</span></span><br></pre></td></tr></table></figure><h2 id="奇特的-Promise-resolve"><a href="#奇特的-Promise-resolve" class="headerlink" title="奇特的 Promise resolve"></a>奇特的 Promise resolve</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    fn(<span class="number">123</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1234</span>)</span><br><span class="line">  &#125;, <span class="number">3000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  a(res)</span><br><span class="line">&#125;)</span><br><span class="line">a.then(<span class="built_in">console</span>.log)</span><br><span class="line"><span class="comment">// 1234</span></span><br><span class="line"><span class="comment">// 123</span></span><br></pre></td></tr></table></figure><p>其实也不奇特，函数是引用传递</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;引用值作为属性名情况&quot;&gt;&lt;a href=&quot;#引用值作为属性名情况&quot; class=&quot;headerlink&quot; title=&quot;引用值作为属性名情况&quot;&gt;&lt;/a&gt;引用值作为属性名情况&lt;/h2&gt;&lt;p&gt;先 toString 再 valueOf，使用独一无二的 key 使用 sy
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>炫酷的CSS</title>
    <link href="https://blog.xunserver.cn/archives/b29594f7.html"/>
    <id>https://blog.xunserver.cn/archives/b29594f7.html</id>
    <published>2020-02-22T08:33:01.000Z</published>
    <updated>2020-02-22T08:33:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="若隐若现的发光字"><a href="#若隐若现的发光字" class="headerlink" title="若隐若现的发光字"></a>若隐若现的发光字</h2><ol><li>background-image： line</li><li>background-position: -500% =&gt; 500%</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;若隐若现的发光字&quot;&gt;&lt;a href=&quot;#若隐若现的发光字&quot; class=&quot;headerlink&quot; title=&quot;若隐若现的发光字&quot;&gt;&lt;/a&gt;若隐若现的发光字&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;background-image： line&lt;/li&gt;
&lt;li&gt;backgrou
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>前端编码的故事</title>
    <link href="https://blog.xunserver.cn/archives/5f877c4e.html"/>
    <id>https://blog.xunserver.cn/archives/5f877c4e.html</id>
    <published>2020-02-18T06:51:19.000Z</published>
    <updated>2020-02-18T06:51:19.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本文记录自己理解 ascii、unicode、utf-8 的含义和区别</p><h2 id="ascii-编码"><a href="#ascii-编码" class="headerlink" title="ascii 编码"></a>ascii 编码</h2><p>ascii 编码使用一个字节代表一个字符，比如 <code>A</code>，二进制就是 <code>0100 0001</code>，十进制就是 <code>65</code>。目前来说 ascii 只有 128 个字符，所以第一位都统一为 <code>0</code></p><h2 id="unicode-编码"><a href="#unicode-编码" class="headerlink" title="unicode 编码"></a>unicode 编码</h2><p>ascii 编码只有 128 种状态，表示英语字符能够，但是表示其他国家语言字符时就不够用， 所以 unicode 编码就是在 ascii 上面扩展到多个字节。所以 unicode 编码将世界上所有符号包括在内。</p><p>unicode 只是定义的符号集，但是有些字符需要多字节存储。这个时候有个问题，如何区分多个独立字节表示的多个符号还是表示的一个符号。 有个解决方式都统一成 4 字节或者更高，这个也有个问题是，英语字符需要一个字节，补位会导致存储空间明显变大。</p><h2 id="utf-8"><a href="#utf-8" class="headerlink" title="utf-8"></a>utf-8</h2><p>为了解决这个问题，出现 UTF-8、UTF-16、UTF-32 这些解决方案。大部分 unicode 字符都是 2 字节<br>UTF-8 是一种可变长得编码方式， 可以使用 1-4 个字节来表示一个符号。编码规则只有两条</p><ol><li>如果是单字节，第一位是 0，剩下用 unicode 编码补齐</li><li>如果字节是 n(n&gt;1), 前 n 位 1，n+1 位 0, 剩下的每个字节的前两位一律 10， 没有提及的位数使用 unicode 编码补全，</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;本文记录自己理解 ascii、unicode、utf-8 的含义和区别&lt;/p&gt;
&lt;h2 id=&quot;ascii-编码&quot;&gt;&lt;a href=&quot;#as
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>算法-递归优化</title>
    <link href="https://blog.xunserver.cn/archives/15477400.html"/>
    <id>https://blog.xunserver.cn/archives/15477400.html</id>
    <published>2020-02-17T02:09:36.000Z</published>
    <updated>2020-02-17T02:09:36.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本文简单记录算法学习中， 递归优化的一些方法</p><h2 id="尾调用"><a href="#尾调用" class="headerlink" title="尾调用"></a>尾调用</h2><p>简单来说就说一个函数末尾返回另一个函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> a()    <span class="comment">// 这种就属于尾调用</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> n+b()   <span class="comment">// 这种不属于， 因为return 了其他计算式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="尾调用优化"><a href="#尾调用优化" class="headerlink" title="尾调用优化"></a>尾调用优化</h2><p>当尾调用的不依赖当前函数时就是尾调用优化，调用栈尽可能少。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> n+x</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b(n)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 这个是尾调用， 但不是尾调用优化。</span></span><br><span class="line">    <span class="comment">// 因为执行 return 时 a依然在调用栈中</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="尾调用优化例子"><a href="#尾调用优化例子" class="headerlink" title="尾调用优化例子"></a>尾调用优化例子</h2><ol><li>保证是一个尾调用</li><li>保证调用栈尽可能的,<code>return</code> 的函数无副作用</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 阶乘函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span>) <span class="keyword">return</span> n;</span><br><span class="line">  <span class="keyword">return</span> n * f1(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params">n, total</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> total;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">arguments</span>.callee(n - <span class="number">1</span>, n * total);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 斐波拉契函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fb1</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">arguments</span>.callee(n - <span class="number">2</span>) + <span class="built_in">arguments</span>.callee(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fb2</span>(<span class="params">n, a1, a2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a2;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">arguments</span>.callee(n - <span class="number">1</span>, a2, a1 + a2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="缓存值的方式优化"><a href="#缓存值的方式优化" class="headerlink" title="缓存值的方式优化"></a>缓存值的方式优化</h2><p>通过把函数中值缓存起来，加快速度，这种仅限于结果集固定的情况</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">memoizer</span>(<span class="params">fn, cache = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!(arg <span class="keyword">in</span> cache)) &#123;</span><br><span class="line">      cache[arg] = fn(arg);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cache[arg];</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> fac = memoizer(<span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span>) <span class="keyword">return</span> n;</span><br><span class="line">  <span class="keyword">return</span> n * <span class="built_in">arguments</span>.callce(n - <span class="number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line">fac(<span class="number">5</span>);</span><br></pre></td></tr></table></figure><h2 id="尾调用转-栈-迭代的通用方案"><a href="#尾调用转-栈-迭代的通用方案" class="headerlink" title="尾调用转 栈 + 迭代的通用方案"></a>尾调用转 栈 + 迭代的通用方案</h2><p>阮一峰书中看到的方案，可以对任意尾调用进行优化, 只能尾调用形式的递归</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tco</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value;</span><br><span class="line">  <span class="keyword">var</span> active = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">var</span> accumulated = [];</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    accumulated.push(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">if</span> (!active) &#123;</span><br><span class="line">      active = <span class="literal">true</span>;</span><br><span class="line">      <span class="keyword">while</span> (accumulated.length) &#123;</span><br><span class="line">        value = fn.apply(<span class="keyword">this</span>, accumulated.shift());</span><br><span class="line">      &#125;</span><br><span class="line">      active = <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="缓存值优化方案"><a href="#缓存值优化方案" class="headerlink" title="缓存值优化方案"></a>缓存值优化方案</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fb</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span> || n === <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> fb(n - <span class="number">1</span>) + fb(n - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 优化</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">optimizeRecursion</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> cache = &#123;&#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arg = <span class="built_in">Array</span>.prototype.join.call(<span class="built_in">arguments</span>, <span class="string">"."</span>);</span><br><span class="line">    <span class="keyword">if</span> (arg <span class="keyword">in</span> cache) &#123;</span><br><span class="line">      <span class="keyword">return</span> cache[arg];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (cache[arg] = fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="斐波拉契数列-转迭代-动态规划"><a href="#斐波拉契数列-转迭代-动态规划" class="headerlink" title="斐波拉契数列 转迭代 动态规划"></a>斐波拉契数列 转迭代 动态规划</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> climbStairs = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> dp = [];</span><br><span class="line">  dp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">  dp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    dp[i] = dp[i - <span class="number">1</span>] + dp[i - <span class="number">2</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="递归时间复杂度和空间复杂度计算规则"><a href="#递归时间复杂度和空间复杂度计算规则" class="headerlink" title="递归时间复杂度和空间复杂度计算规则"></a>递归时间复杂度和空间复杂度计算规则</h2><p>递归次数和计算函数的时间的乘积</p><h2 id="二叉树的最大深度"><a href="#二叉树的最大深度" class="headerlink" title="二叉树的最大深度"></a>二叉树的最大深度</h2><h3 id="普通迭代方案"><a href="#普通迭代方案" class="headerlink" title="普通迭代方案"></a>普通迭代方案</h3><p><img src="https://leetcode-cn.com/problems/maximum-depth-of-binary-tree/solution/104-er-cha-shu-de-zui-da-shen-du-by-alexer-660/" alt="123"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">maxDeep</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (node === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.max(maxDeep(node.left), maxDeep(node.right)) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="总结-二叉树数组的关系"><a href="#总结-二叉树数组的关系" class="headerlink" title="总结 二叉树数组的关系"></a>总结 二叉树数组的关系</h3><ol><li>深度 log2 (length+1)</li><li>i 行第一个元素和最后一个: 第一个 2^i - 1 最后一个 2^(i+1) - 2 ， i 从 0 开始</li><li>i 行元素个数 2 ^ i</li><li>左节点 <code>2 * i + 1</code> 右节点 <code>2 * i + 2</code></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;本文简单记录算法学习中， 递归优化的一些方法&lt;/p&gt;
&lt;h2 id=&quot;尾调用&quot;&gt;&lt;a href=&quot;#尾调用&quot; class=&quot;headerli
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>浏览器追踪</title>
    <link href="https://blog.xunserver.cn/archives/bfdd4d38.html"/>
    <id>https://blog.xunserver.cn/archives/bfdd4d38.html</id>
    <published>2019-12-19T09:34:21.000Z</published>
    <updated>2019-12-19T09:34:21.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本文适用同机器同浏览器追踪。分为 5 个大指标：browser_fp canvas_fp webgl_fp audio_fp webrtc。采集指标需要具有稳定性， 即多次采集值不会变</p><h2 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h2><ol><li>匿名用户系统</li><li>未登录的用户</li><li>广告 ID</li></ol><h2 id="浏览器指纹"><a href="#浏览器指纹" class="headerlink" title="浏览器指纹"></a>浏览器指纹</h2><h3 id="webdriver-cpuClass-deviceMemory-UserAgent-platform"><a href="#webdriver-cpuClass-deviceMemory-UserAgent-platform" class="headerlink" title="webdriver cpuClass deviceMemory UserAgent platform"></a>webdriver cpuClass deviceMemory UserAgent platform</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> navigator.webdriver; <span class="comment">// 这个可以检测 自动化测试工具（puppeteer, selenium）</span></span><br><span class="line"><span class="keyword">return</span> navigator.cpuClass; <span class="comment">// cpu等级</span></span><br><span class="line"><span class="keyword">return</span> navigator.deviceMemory; <span class="comment">// 设备内存大小 8</span></span><br><span class="line"><span class="keyword">return</span> navigator.UserAgent; <span class="comment">// 浏览器标识 (操作系统标识; 加密等级标识; 浏览器语言) 渲染引擎标识 版本信息</span></span><br><span class="line"><span class="keyword">return</span> navigator.hardwareConcurrencyKey; <span class="comment">// cpu核心数  4核几线程</span></span><br><span class="line"><span class="keyword">return</span> navigator.platform; <span class="comment">// Win32</span></span><br></pre></td></tr></table></figure><h3 id="language"><a href="#language" class="headerlink" title="language"></a>language</h3><p>navigator 里面有两个关于 language 的 一个 language，一个是 languages, language 是不是和 languages 相等，来判断用户是不是改过语言，同时需要结合 ip 时区归属地来标记异常用户</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getLanguage = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    navigator.language ||</span><br><span class="line">    navigator.userLanguage ||</span><br><span class="line">    navigator.browserLanguage ||</span><br><span class="line">    navigator.systemLanguage</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="colorDepth-screenResolution-devicePixelRatio"><a href="#colorDepth-screenResolution-devicePixelRatio" class="headerlink" title="colorDepth screenResolution devicePixelRatio"></a>colorDepth screenResolution devicePixelRatio</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="built_in">window</span>.screen.colorDepth; <span class="comment">// 颜色深度</span></span><br><span class="line"><span class="keyword">return</span> [<span class="built_in">window</span>.screen.width, <span class="built_in">window</span>.screen.height]; <span class="comment">// 设备分辨率</span></span><br><span class="line"><span class="keyword">return</span> [<span class="built_in">window</span>.screen.availHeight, <span class="built_in">window</span>.screen.availWidth]; <span class="comment">// 可用分辨率</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">window</span>.devicePixelRatio; <span class="comment">// 视网膜屏比例</span></span><br></pre></td></tr></table></figure><h3 id="timezone-时区"><a href="#timezone-时区" class="headerlink" title="timezone 时区"></a>timezone 时区</h3><p>判断 <code>ip</code> 是否和时区一致</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getTimezone = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">window</span>.Intl.DateTimeFormat().resolvedOptions().timeZone;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="timezoneOffset-时区偏移"><a href="#timezoneOffset-时区偏移" class="headerlink" title="timezoneOffset 时区偏移"></a>timezoneOffset 时区偏移</h3><p>和上面类似</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getTimezoneOffset = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>().getTimezoneOffset();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="sessionStorage-localStorage-IndexedDB-openDatabase"><a href="#sessionStorage-localStorage-IndexedDB-openDatabase" class="headerlink" title="sessionStorage localStorage IndexedDB openDatabase"></a>sessionStorage localStorage IndexedDB openDatabase</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> !!<span class="built_in">window</span>.localStorage;</span><br><span class="line"><span class="keyword">return</span> !!<span class="built_in">window</span>.sessionStorage;</span><br><span class="line"><span class="keyword">return</span> !!<span class="built_in">window</span>.indexedDB;</span><br><span class="line"><span class="keyword">return</span> !!<span class="built_in">window</span>.openDatabase;</span><br></pre></td></tr></table></figure><h3 id="doNotTrack-浏览器设置的不追踪标记"><a href="#doNotTrack-浏览器设置的不追踪标记" class="headerlink" title="doNotTrack 浏览器设置的不追踪标记"></a>doNotTrack 浏览器设置的不追踪标记</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> navigator.doNotTrack || navigator.msDoNotTrac || <span class="built_in">window</span>.doNotTrack;</span><br></pre></td></tr></table></figure><h3 id="plugins-浏览器插件"><a href="#plugins-浏览器插件" class="headerlink" title="plugins 浏览器插件"></a>plugins 浏览器插件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">navigator.plugins; <span class="comment">// 非IE</span></span><br><span class="line"><span class="comment">// IE</span></span><br><span class="line"><span class="keyword">var</span> names = [</span><br><span class="line">  <span class="string">"AcroPDF.PDF"</span>, <span class="comment">// Adobe PDF reader 7+</span></span><br><span class="line">  <span class="string">"Adodb.Stream"</span>,</span><br><span class="line">  <span class="string">"AgControl.AgControl"</span>, <span class="comment">// Silverlight</span></span><br><span class="line">  <span class="string">"DevalVRXCtrl.DevalVRXCtrl.1"</span>,</span><br><span class="line">  <span class="string">"MacromediaFlashPaper.MacromediaFlashPaper"</span>,</span><br><span class="line">  <span class="string">"Msxml2.DOMDocument"</span>,</span><br><span class="line">  <span class="string">"Msxml2.XMLHTTP"</span>,</span><br><span class="line">  <span class="string">"PDF.PdfCtrl"</span>, <span class="comment">// Adobe PDF reader 6 and earlier, brrr</span></span><br><span class="line">  <span class="string">"QuickTime.QuickTime"</span>, <span class="comment">// QuickTime</span></span><br><span class="line">  <span class="string">"QuickTimeCheckObject.QuickTimeCheck.1"</span>,</span><br><span class="line">  <span class="string">"RealPlayer"</span>,</span><br><span class="line">  <span class="string">"RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)"</span>,</span><br><span class="line">  <span class="string">"RealVideo.RealVideo(tm) ActiveX Control (32-bit)"</span>,</span><br><span class="line">  <span class="string">"Scripting.Dictionary"</span>,</span><br><span class="line">  <span class="string">"SWCtl.SWCtl"</span>, <span class="comment">// ShockWave player</span></span><br><span class="line">  <span class="string">"Shell.UIHelper"</span>,</span><br><span class="line">  <span class="string">"ShockwaveFlash.ShockwaveFlash"</span>, <span class="comment">// flash plugin</span></span><br><span class="line">  <span class="string">"Skype.Detection"</span>,</span><br><span class="line">  <span class="string">"TDCCtl.TDCCtl"</span>,</span><br><span class="line">  <span class="string">"WMPlayer.OCX"</span>, <span class="comment">// Windows media player</span></span><br><span class="line">  <span class="string">"rmocx.RealPlayer G2 Control"</span>,</span><br><span class="line">  <span class="string">"rmocx.RealPlayer G2 Control.1"</span></span><br><span class="line">];</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">new</span> <span class="keyword">new</span> <span class="built_in">window</span>.ActiveXObject(names[i])(); <span class="comment">// 通过是否能够成功构造对象来区分</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="devices"><a href="#devices" class="headerlink" title="devices"></a>devices</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">navigator.mediaDevices.enumerateDevices().then();</span><br></pre></td></tr></table></figure><h2 id="canvas-fp"><a href="#canvas-fp" class="headerlink" title="canvas_fp"></a>canvas_fp</h2><p>画布指纹原理是通过 canvas 绘制图片，绘制的图片由于不同设备， 不同浏览器绘制的图片 base64 不相同。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 关于canvas的几个指标</span></span><br><span class="line"><span class="keyword">var</span> result = [];</span><br><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">"canvas"</span>);</span><br><span class="line">canvas.width = <span class="number">2000</span>;</span><br><span class="line">canvas.height = <span class="number">200</span>;</span><br><span class="line">canvas.style.display = <span class="string">"inline"</span>;</span><br><span class="line"><span class="keyword">var</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">ctx.rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">ctx.rect(<span class="number">2</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">6</span>);</span><br><span class="line">result.push(&#123;</span><br><span class="line">  name: <span class="string">"canvas winding"</span>,</span><br><span class="line">  value: ctx.isPointInPath(<span class="number">5</span>, <span class="number">5</span>, <span class="string">"evenodd"</span>) === <span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line">ctx.textBaseline = <span class="string">"alphabetic"</span>;</span><br><span class="line">ctx.fillStyle = <span class="string">"#f60"</span>;</span><br><span class="line">ctx.fillRect(<span class="number">126</span>, <span class="number">1</span>, <span class="number">62</span>, <span class="number">20</span>);</span><br><span class="line">ctx.fillStyle = <span class="string">"#069"</span>;</span><br><span class="line">ctx.font = <span class="string">"11pt no-real-font-123"</span>;</span><br><span class="line">ctx.fillStyle = <span class="string">"rgba(102, 204, 0 ,0.2)"</span>;</span><br><span class="line">ctx.fileText(<span class="string">"QWEtyioio asdgh sad, ~! \ud83d\ude03"</span>, <span class="number">4</span>, <span class="number">45</span>);</span><br><span class="line">ctx.fileText(<span class="string">"QWEtyioio asdgh sad, ~! \ud83d\ude03"</span>, <span class="number">16</span>, <span class="number">56</span>);</span><br><span class="line">ctx.globalCompositeOperation = <span class="string">"multiply"</span>;</span><br><span class="line">ctx.fillStyle = <span class="string">"rgba(255, 0, 255)"</span>;</span><br><span class="line">ctx.beginPath();</span><br><span class="line">ctx.arc(<span class="number">50</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>, <span class="literal">true</span>);</span><br><span class="line">ctx.closePath();</span><br><span class="line">ctx.fill();</span><br><span class="line">ctx.fillStyle = <span class="string">"rgb(0,255,255)"</span>;</span><br><span class="line">ctx.beginPath();</span><br><span class="line">ctx.arc(<span class="number">100</span>, <span class="number">50</span>, <span class="number">50</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>, <span class="literal">true</span>);</span><br><span class="line">ctx.closePath();</span><br><span class="line">ctx.fill();</span><br><span class="line">ctx.fillStyle = <span class="string">"rgb(255,255,0)"</span>;</span><br><span class="line">ctx.beginPath();</span><br><span class="line">ctx.arc(<span class="number">75</span>, <span class="number">100</span>, <span class="number">50</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>, <span class="literal">true</span>);</span><br><span class="line">ctx.closePath();</span><br><span class="line">ctx.fill();</span><br><span class="line">ctx.fillStyle = <span class="string">"rgb(255,0,255)"</span>;</span><br><span class="line"><span class="comment">// canvas winding</span></span><br><span class="line"><span class="comment">// http://blogs.adobe.com/webplatform/2013/01/30/winding-rules-in-canvas/</span></span><br><span class="line"><span class="comment">// http://jsfiddle.net/NDYV8/19/</span></span><br><span class="line">ctx.arc(<span class="number">75</span>, <span class="number">75</span>, <span class="number">75</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>, <span class="literal">true</span>);</span><br><span class="line">ctx.arc(<span class="number">75</span>, <span class="number">75</span>, <span class="number">25</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>, <span class="literal">true</span>);</span><br><span class="line">ctx.fill(<span class="string">"evenodd"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (canvas.toDataURL) &#123;</span><br><span class="line">  result.push(&#123;</span><br><span class="line">    name: <span class="string">"img"</span>,</span><br><span class="line">    value: canvas.toDataURL()</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="webgl-fp"><a href="#webgl-fp" class="headerlink" title="webgl_fp"></a>webgl_fp</h2><p>通过生成 webgl 图像来区分<br><a href="https://github.com/Valve/fingerprintjs2/blob/437c9636bede60e6441ee22445434067c8db93fe/fingerprint2.js#L963" target="_blank" rel="noopener">fp2.js 关于 webgl 实现</a></p><h2 id="audio-fp"><a href="#audio-fp" class="headerlink" title="audio_fp"></a>audio_fp</h2><p>通过生成的处理后音频来区分<br><a href="https://github.com/Valve/fingerprintjs2/blob/437c9636bede60e6441ee22445434067c8db93fe/fingerprint2.js#L345" target="_blank" rel="noopener">fp2.js 关于 audio_context 的 实现</a></p><h2 id="webrtc"><a href="#webrtc" class="headerlink" title="webrtc"></a>webrtc</h2><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol><li><a href="https://github.com/Valve/fingerprintjs2" target="_blank" rel="noopener">fingerprintjs2</a></li><li><a href="http://www.2je.net/jishusuibi/536.html" target="_blank" rel="noopener">Canvas,WebGL 以及 AudioContext 指纹原理</a></li><li><a href="http://www.sohu.com/a/127389606_463994" target="_blank" rel="noopener">真正的感知：Web 客户端追踪技术</a></li><li><a href="https://cloud.tencent.com/developer/article/1534315" target="_blank" rel="noopener">人的唯一性识别</a></li><li><a href="https://github.com/samyk/evercookie/blob/master/js/evercookie.js" target="_blank" rel="noopener">everycookie</a></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;本文适用同机器同浏览器追踪。分为 5 个大指标：browser_fp canvas_fp webgl_fp audio_fp webrtc。
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>vuepress踩坑记录</title>
    <link href="https://blog.xunserver.cn/archives/f8e87dde.html"/>
    <id>https://blog.xunserver.cn/archives/f8e87dde.html</id>
    <published>2019-11-28T02:43:27.000Z</published>
    <updated>2019-11-28T02:43:27.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="alias-设置"><a href="#alias-设置" class="headerlink" title="alias 设置"></a>alias 设置</h2><p>需要使用 <code>resolve</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    configureWebpack: &#123;</span><br><span class="line">        resolve: &#123;</span><br><span class="line">            alias: &#123;</span><br><span class="line">                <span class="string">'@public'</span>: path.resolve(__dirname, <span class="string">'./public'</span>),</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;alias-设置&quot;&gt;&lt;a href=&quot;#alias-设置&quot; class=&quot;headerlink&quot; title=&quot;alias 设置&quot;&gt;&lt;/a&gt;alias 设置&lt;/h2&gt;&lt;p&gt;需要使用 &lt;code&gt;resolve&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;h
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>docker-swarm</title>
    <link href="https://blog.xunserver.cn/archives/8f65.html"/>
    <id>https://blog.xunserver.cn/archives/8f65.html</id>
    <published>2019-11-22T01:06:13.000Z</published>
    <updated>2019-11-22T01:06:13.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="防火墙配置"><a href="#防火墙配置" class="headerlink" title="防火墙配置"></a>防火墙配置</h2><p>2377/tcp：用于客户端与 Swarm 进行安全通信。<br>7946/tcp 与 7946/udp：用于控制面 gossip 分发。<br>4789/udp：用于基于 VXLAN 的覆盖网络。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;防火墙配置&quot;&gt;&lt;a href=&quot;#防火墙配置&quot; class=&quot;headerlink&quot; title=&quot;防火墙配置&quot;&gt;&lt;/a&gt;防火墙配置&lt;/h2&gt;&lt;p&gt;2377/tcp：用于客户端与 Swarm 进行安全通信。&lt;br&gt;7946/tcp 与 7946/udp：用于控制面
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>开发小技巧</title>
    <link href="https://blog.xunserver.cn/archives/129533de.html"/>
    <id>https://blog.xunserver.cn/archives/129533de.html</id>
    <published>2019-11-21T01:08:40.000Z</published>
    <updated>2019-11-21T01:08:40.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="查看端口是否开启"><a href="#查看端口是否开启" class="headerlink" title="查看端口是否开启"></a>查看端口是否开启</h2> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Connection successful:</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> timeout 1 bash -c <span class="string">'cat &lt; /dev/null &gt; /dev/tcp/google.com/80'</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> $?</span></span><br><span class="line">0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Connection failure prior to the timeout</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> timeout 1 bash -c <span class="string">'cat &lt; /dev/null &gt; /dev/tcp/sfsfdfdff.com/80'</span></span></span><br><span class="line">bash: sfsfdfdff.com: Name or service not known</span><br><span class="line">bash: /dev/tcp/sfsfdfdff.com/80: Invalid argument</span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> $?</span></span><br><span class="line">1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Connection not established by the timeout</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> timeout 1 bash -c <span class="string">'cat &lt; /dev/null &gt; /dev/tcp/google.com/81'</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> $?</span></span><br><span class="line">124</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;查看端口是否开启&quot;&gt;&lt;a href=&quot;#查看端口是否开启&quot; class=&quot;headerlink&quot; title=&quot;查看端口是否开启&quot;&gt;&lt;/a&gt;查看端口是否开启&lt;/h2&gt; &lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td c
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>爬虫</title>
    <link href="https://blog.xunserver.cn/archives/7ade1d5c.html"/>
    <id>https://blog.xunserver.cn/archives/7ade1d5c.html</id>
    <published>2019-10-30T01:43:06.000Z</published>
    <updated>2019-10-30T01:43:06.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="泄露-500-5000-50000-个人信息"><a href="#泄露-500-5000-50000-个人信息" class="headerlink" title="泄露 500, 5000, 50000 个人信息"></a>泄露 500, 5000, 50000 个人信息</h2><h2 id="关键数据库-！！！！脱敏"><a href="#关键数据库-！！！！脱敏" class="headerlink" title="关键数据库 ！！！！脱敏"></a>关键数据库 ！！！！脱敏</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;泄露-500-5000-50000-个人信息&quot;&gt;&lt;a href=&quot;#泄露-500-5000-50000-个人信息&quot; class=&quot;headerlink&quot; title=&quot;泄露 500, 5000, 50000 个人信息&quot;&gt;&lt;/a&gt;泄露 500, 5000, 5000
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>etcd使用</title>
    <link href="https://blog.xunserver.cn/archives/19889329.html"/>
    <id>https://blog.xunserver.cn/archives/19889329.html</id>
    <published>2019-10-29T08:57:54.000Z</published>
    <updated>2019-10-29T08:57:54.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><ol><li>分布式键值对存储仓库（基础使用）</li><li>配置共享和服务发现（高级场景）<br><a href="https://blog.csdn.net/bbwangj/article/details/82584988" target="_blank" rel="noopener">其他场景</a></li></ol><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>软件版本 <code>v3.4.3</code></p><h3 id="下载解压"><a href="#下载解压" class="headerlink" title="下载解压"></a>下载解压</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/etcd-io/etcd/releases/download/v3.4.3/etcd-v3.4.3-linux-amd64.tar.gz</span><br><span class="line">tar xzvf etcd-v3.4.3-linux-amd64.tar.gz</span><br></pre></td></tr></table></figure><h3 id="单机单节点部署"><a href="#单机单节点部署" class="headerlink" title="单机单节点部署"></a>单机单节点部署</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./etcd</span><br></pre></td></tr></table></figure><h3 id="参数说明"><a href="#参数说明" class="headerlink" title="参数说明"></a>参数说明</h3><p>参数支持命令行参数和 yaml 配置文件形式</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">name  <span class="string">//</span> 节点名称 默认为default</span><br><span class="line">data-dir  <span class="string">//</span> 存储目录 ;</span><br><span class="line">initial-advertise-peer -urls; <span class="string">//</span> 初始化通信地址 默认 http:<span class="string">//localhost</span><span class="function">:2380</span></span><br><span class="line">listen-peer-urls; <span class="string">//</span> 通信地址  默认 http:<span class="string">//localhost</span><span class="function">:2380</span></span><br><span class="line">initial-cluster; <span class="string">//</span> 集群节点配置信息 node1=http:<span class="string">//192.168.1.10</span><span class="function">:2380</span>,node2=<span class="string">...</span></span><br><span class="line">listen-client-urls <span class="string">//</span> 客户端地址</span><br><span class="line">advertise-client-urls  <span class="string">//</span> 对外公告的地址</span><br></pre></td></tr></table></figure><h3 id="发现模式"><a href="#发现模式" class="headerlink" title="发现模式"></a>发现模式</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ curl http://discovery.etcd.io/new?size=3</span><br><span class="line">http://discovery.etcd.io/3e86b59982e49066c5d813af1c2e2579cbf573de</span><br><span class="line">$ ./etcd -discovery http://discovery.etcd.io/3e86b59982e49066c5d813af1c2e2579cbf573de</span><br></pre></td></tr></table></figure><h2 id="扩展节点"><a href="#扩展节点" class="headerlink" title="扩展节点"></a>扩展节点</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 旧节点启动</span></span><br><span class="line">$ ./etcdctl member add node --peer-urls http://192.168.10.12</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新节点加入 initial-cluster-state 设置为 existing</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;分布式键值对存储仓库（基础使用）&lt;/li&gt;
&lt;li&gt;配置共享和服务发现（高级场景）&lt;br&gt;&lt;a href=&quot;https://bl
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>踩坑日记</title>
    <link href="https://blog.xunserver.cn/archives/8d485cf3.html"/>
    <id>https://blog.xunserver.cn/archives/8d485cf3.html</id>
    <published>2019-10-29T01:36:30.000Z</published>
    <updated>2019-10-29T01:36:30.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="data-url-和-base-64-的区别"><a href="#data-url-和-base-64-的区别" class="headerlink" title="data url 和 base 64 的区别"></a>data url 和 base 64 的区别</h2><p>网页上使用 data-url， 对文件进行 base64 编码<br>data-url =&gt; <code>data:image/gif;base64,R0lGODlhAwADAIAAAP///8zMzCH5BAAAA</code><br>base64 =&gt; <code>R0lGODlhAwADAIAAAP///8zMzCH5BAAAA</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;data-url-和-base-64-的区别&quot;&gt;&lt;a href=&quot;#data-url-和-base-64-的区别&quot; class=&quot;headerlink&quot; title=&quot;data url 和 base 64 的区别&quot;&gt;&lt;/a&gt;data url 和 base 64 的
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>js真值，隐形转换，比较</title>
    <link href="https://blog.xunserver.cn/archives/3c778964.html"/>
    <id>https://blog.xunserver.cn/archives/3c778964.html</id>
    <published>2019-10-08T03:34:29.000Z</published>
    <updated>2019-10-08T03:34:29.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="假值的情况"><a href="#假值的情况" class="headerlink" title="假值的情况"></a>假值的情况</h2><ol><li><code>&quot;&quot;</code>是假</li><li>数字 <code>0</code>，<code>+0</code>，<code>-0</code>，<code>NaN</code> 是假，其余是真</li><li><code>Symbol</code> 是真</li><li><code>undefined</code>、<code>null</code> 是假</li></ol><p>除以上的情况，所有都是真值</p><h2 id="真假值使用的情况"><a href="#真假值使用的情况" class="headerlink" title="真假值使用的情况"></a>真假值使用的情况</h2><ol><li>if语句</li><li>!取反</li></ol><h2 id="情况分析"><a href="#情况分析" class="headerlink" title="== 情况分析"></a>== 情况分析</h2><ol><li>NaN 均不==</li><li>undefined和null相等</li><li>一个是boolean，另一个是Number或String， boolean转成数字</li><li>一个是对象，对象先valueOf再toString。变换成基本类型比较</li></ol><h2 id="关系运算符（-gt-、-lt-、-、-…）"><a href="#关系运算符（-gt-、-lt-、-、-…）" class="headerlink" title="关系运算符（&gt;、&lt;、==、!=…）"></a>关系运算符（&gt;、&lt;、==、!=…）</h2><ol><li>===、!==：同时对比类型和值，两个都为真才返回真</li><li>==、!=: 若两边均为对象，对比它们的引用是否相同</li><li>逻辑非(!): 将其后变量或表达式转为布尔值</li><li>对比字符串：从头至尾扫描逐个比较每个字符的unicode码，直到分出大小</li><li>其他情况下，两边均转为数值类型</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;假值的情况&quot;&gt;&lt;a href=&quot;#假值的情况&quot; class=&quot;headerlink&quot; title=&quot;假值的情况&quot;&gt;&lt;/a&gt;假值的情况&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;&amp;quot;&amp;quot;&lt;/code&gt;是假&lt;/li&gt;
&lt;li&gt;数字 &lt;code&gt;0&lt;/cod
      
    
    </summary>
    
    
  </entry>
  
</feed>
