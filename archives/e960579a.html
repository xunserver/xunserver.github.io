<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/uploads/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/uploads/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="down，bang">





  <link rel="alternate" href="/atom.xml" title="bang" type="application/atom+xml">






<meta name="description" content="Javascript 编码规范[TOC] 术语 原则: 必须坚持的指导思想 建议: 需要加以考虑的约定 不好示例: 反面教材，里面的都是错误示范 推荐示例: 正面教程，可以按照里面示例类推  命令文件建议: 不使用index文件实现逻辑，index用于聚合导出。避免componentA/index.js，然后在index.js 写component的逻辑，正确的写法是 componentA/com">
<meta name="keywords" content="博客,xunsever,bang">
<meta property="og:type" content="article">
<meta property="og:title" content="js编码规范">
<meta property="og:url" content="https://blog.xunserver.cn/archives/e960579a.html">
<meta property="og:site_name" content="bang">
<meta property="og:description" content="Javascript 编码规范[TOC] 术语 原则: 必须坚持的指导思想 建议: 需要加以考虑的约定 不好示例: 反面教材，里面的都是错误示范 推荐示例: 正面教程，可以按照里面示例类推  命令文件建议: 不使用index文件实现逻辑，index用于聚合导出。避免componentA/index.js，然后在index.js 写component的逻辑，正确的写法是 componentA/com">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2021-08-13T09:29:12.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="js编码规范">
<meta name="twitter:description" content="Javascript 编码规范[TOC] 术语 原则: 必须坚持的指导思想 建议: 需要加以考虑的约定 不好示例: 反面教材，里面的都是错误示范 推荐示例: 正面教程，可以按照里面示例类推  命令文件建议: 不使用index文件实现逻辑，index用于聚合导出。避免componentA/index.js，然后在index.js 写component的逻辑，正确的写法是 componentA/com">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://blog.xunserver.cn/archives/e960579a.html">





  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "f81d2d8f"
    });
  daovoice('update');
  </script>

  <title>js编码规范 | bang</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-138453533-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?46adc4f6ca707e081b3f4e2bee76f673";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">bang</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">生活总会有惊喜</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>
            
            公益404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.xunserver.cn/archives/e960579a.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yangmanman">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="bang">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">js编码规范</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-08-13T09:29:12+00:00">
                2021-08-13
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/archives/e960579a.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/archives/e960579a.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/archives/e960579a.html" class="leancloud_visitors" data-flag-title="js编码规范">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">热度&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
                 <span>ºC</span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  5.5k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 </span>
                
                <span title="阅读时长">
                  20 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Javascript-编码规范"><a href="#Javascript-编码规范" class="headerlink" title="Javascript 编码规范"></a>Javascript 编码规范</h1><p>[TOC]</p>
<h2 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h2><ul>
<li>原则: 必须坚持的指导思想</li>
<li>建议: 需要加以考虑的约定</li>
<li>不好示例: 反面教材，里面的都是错误示范</li>
<li>推荐示例: 正面教程，可以按照里面示例类推</li>
</ul>
<h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><h3 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h3><h4 id="建议-不使用index文件实现逻辑，index用于聚合导出。"><a href="#建议-不使用index文件实现逻辑，index用于聚合导出。" class="headerlink" title="建议: 不使用index文件实现逻辑，index用于聚合导出。"></a>建议: 不使用index文件实现逻辑，index用于聚合导出。</h4><p>避免<code>componentA/index.js</code>，然后在index.js 写component的逻辑，正确的写法是 <code>componentA/componentA.js</code>。 <code>componentA/index.js</code> 仅作导出。当你在浏览器resource查找文件就知道了-__-。</p>
<h3 id="命名原则"><a href="#命名原则" class="headerlink" title="命名原则"></a>命名原则</h3><h4 id="原则-源文件编码格式（包括注释）必须是UTF-8"><a href="#原则-源文件编码格式（包括注释）必须是UTF-8" class="headerlink" title="原则: 源文件编码格式（包括注释）必须是UTF-8"></a>原则: 源文件编码格式（包括注释）必须是UTF-8</h4><p>大家一定被乱码的解释折磨过….</p>
<h4 id="原则-方法、变量需要一个好名字"><a href="#原则-方法、变量需要一个好名字" class="headerlink" title="原则: 方法、变量需要一个好名字"></a>原则: 方法、变量需要一个好名字</h4><p>好的名字有包括不局限以下特征:</p>
<ol>
<li>清晰表达意图：使用有描述性的型单词，避免使用单个字母，或者自创缩写来表达，比如 let lastDay 比 let ld 要好</li>
<li>必须使用英文单词，不允许出现中文拼音（约定熟成除外）。中文拼音在多音字表现上会有歧义，而且不太利于团队以后成成长</li>
<li>避免误导性命名，有误导的命名比表达不清晰还要危险，比如 let nameArray 不是一个array类型，而是一个字符串。</li>
<li>能区分出意思，建议不要在变量后面加上data，info，object等一般意思的词。比如productInfo和productData有什么区别。</li>
</ol>
<h3 id="类"><a href="#类" class="headerlink" title="类"></a>类</h3><h4 id="原则-构造函数、类命名都是用大驼峰"><a href="#原则-构造函数、类命名都是用大驼峰" class="headerlink" title="原则: 构造函数、类命名都是用大驼峰"></a>原则: 构造函数、类命名都是用大驼峰</h4><p>推荐示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Kind</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span>() </span>&#123;&#125;</span><br></pre></td></tr></table></figure></p>
<p>不好示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">kind</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">people</span>() </span>&#123;&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="原则-方法命名使用动词、动宾结构，并遵守驼峰原则"><a href="#原则-方法命名使用动词、动宾结构，并遵守驼峰原则" class="headerlink" title="原则: 方法命名使用动词、动宾结构，并遵守驼峰原则"></a>原则: 方法命名使用动词、动宾结构，并遵守驼峰原则</h4><p>格式如下</p>
<ol>
<li>get + 非布尔属性名</li>
<li>is + 布尔属性名</li>
<li>set + 属性名</li>
<li>has + 名字\形容词</li>
<li>动词</li>
<li>动词 + 宾语<br>不好的示例<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">type</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Finished</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">visible</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DRAW</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">keyListener</span>(<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>推荐示例:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isFinished</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setVisible</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addKeyListener</span>(<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="原则-方法名不能过长影响可读性"><a href="#原则-方法名不能过长影响可读性" class="headerlink" title="原则: 方法名不能过长影响可读性"></a>原则: 方法名不能过长影响可读性</h4><p>方法名不能超过15个字符，可以采用去掉元音字符或者业界约定的缩写来表示。<br>比如 <code>function getCustomerInfomation() {}</code> 可以改成 <code>function getCustomerInfo() {}</code></p>
<h4 id="建议-私有属性或者方法，-建议以下划线-开头"><a href="#建议-私有属性或者方法，-建议以下划线-开头" class="headerlink" title="建议: 私有属性或者方法， 建议以下划线_开头"></a>建议: 私有属性或者方法， 建议以下划线_开头</h4><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><h4 id="原则-变量名遵循驼峰风格-首字母大写，后续每个单词小写"><a href="#原则-变量名遵循驼峰风格-首字母大写，后续每个单词小写" class="headerlink" title="原则: 变量名遵循驼峰风格, 首字母大写，后续每个单词小写"></a>原则: 变量名遵循驼峰风格, 首字母大写，后续每个单词小写</h4><h4 id="建议-避免使用否定的布尔变量名"><a href="#建议-避免使用否定的布尔变量名" class="headerlink" title="建议: 避免使用否定的布尔变量名"></a>建议: 避免使用否定的布尔变量名</h4><p>对于否定的布尔变量名，当使用逻辑非运算符时，会出现双重否定，对阅读造成阻碍，比如<code>!isNotError</code>。</p>
<p>不好示例:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isNotError = <span class="literal">true</span>;  <span class="comment">// 到底有没有错</span></span><br><span class="line"><span class="keyword">const</span> inNotFinished = <span class="literal">false</span>; <span class="comment">// 结束没有</span></span><br></pre></td></tr></table></figure></p>
<p>推荐示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isError = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">const</span> inNotFinished = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure></p>
<h4 id="建议-缩写词应该全部大写或者小写，不要混搭。"><a href="#建议-缩写词应该全部大写或者小写，不要混搭。" class="headerlink" title="建议: 缩写词应该全部大写或者小写，不要混搭。"></a>建议: 缩写词应该全部大写或者小写，不要混搭。</h4><h4 id="原则-不要用保留字作为键名或者变量名，使用同义词。"><a href="#原则-不要用保留字作为键名或者变量名，使用同义词。" class="headerlink" title="原则: 不要用保留字作为键名或者变量名，使用同义词。"></a>原则: 不要用保留字作为键名或者变量名，使用同义词。</h4><p>为了兼容未来，虽然在语法上使用保留字作为键名是可以允许的。可以这样改<code>class =&gt; klass</code>， <code>default =&gt; defaults</code>，<code>private =&gt; hidden</code></p>
<h4 id="原则-常量使用全部大写并且用下划线-分隔"><a href="#原则-常量使用全部大写并且用下划线-分隔" class="headerlink" title="原则: 常量使用全部大写并且用下划线_分隔"></a>原则: 常量使用全部大写并且用下划线_分隔</h4><ol>
<li>不要魔鬼数字，比如错误码 <code>response.code === &quot;0000&quot; || response.code === 5</code>, 这种代码，不熟悉的人需要花时间去理解 <code>5</code> 是什么，<code>&quot;0000&quot;</code> 又是什么。</li>
<li>不要魔鬼常量，比如<code>const NUM_FOUR = 4</code>这种脱了裤子放屁行为;<br>推荐示例<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SUCCESS_CODE = <span class="string">'0000'</span>;</span><br><span class="line"><span class="keyword">if</span> (response.code === SUCCESS_CODE) &#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> MAX_GOODS_NUM = <span class="number">4</span>;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><h3 id="注释原则"><a href="#注释原则" class="headerlink" title="注释原则"></a>注释原则</h3><h4 id="最好的注释就是没有注释"><a href="#最好的注释就是没有注释" class="headerlink" title="最好的注释就是没有注释"></a>最好的注释就是没有注释</h4><p>注释的作用是解释代码。如果变量命令足够清晰，代码结构好就不需要注释。举个例子<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 大于65岁并且是职工，或者性别是女可以领福利</span></span><br><span class="line"><span class="keyword">if</span> ((person.flag === <span class="number">0</span> &amp;&amp; person.age &gt; <span class="number">65</span>) || person.sex === <span class="number">1</span>) &#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>别人审阅读代码时需要看注释才能知道if语句中含义。可以换成如下写法<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isBenefits(person)) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>直接通过阅读代码就可以理解到意思，如果需要深读判断逻辑，同时隔离的函数也方便阅读。</p>
<h4 id="原则-注释的作用是帮助理解代码，而不是误解代码"><a href="#原则-注释的作用是帮助理解代码，而不是误解代码" class="headerlink" title="原则: 注释的作用是帮助理解代码，而不是误解代码"></a>原则: 注释的作用是帮助理解代码，而不是误解代码</h4><p>无用的注释，过期的注释及时清理掉。如果一个注释和代码实现不一致，那么enummmm….。</p>
<h4 id="原则-不要出现todo代码，todo代码自己在个人备忘录记录。"><a href="#原则-不要出现todo代码，todo代码自己在个人备忘录记录。" class="headerlink" title="原则: 不要出现todo代码，todo代码自己在个人备忘录记录。"></a>原则: 不要出现todo代码，todo代码自己在个人备忘录记录。</h4><p>大家习惯把部分代码标记上todo，然后推到公共分支。如果某一天你不接手这个项目了，后面的人看到你写的todo，他到底需不要todo，这是个问题。</p>
<h4 id="建议-不要临时注释屏蔽代码，直接删除。"><a href="#建议-不要临时注释屏蔽代码，直接删除。" class="headerlink" title="建议: 不要临时注释屏蔽代码，直接删除。"></a>建议: 不要临时注释屏蔽代码，直接删除。</h4><p>临时注释屏蔽部分代码是大部分人常见的操作，可以直接删除。如果后续需要找回，git来帮忙。否则后面的人接手一看，这个代码屏蔽注释了，不知道啥原因，不敢动，久而久之，x山。</p>
<h4 id="原则-不要用注释记录文件修改信息"><a href="#原则-不要用注释记录文件修改信息" class="headerlink" title="原则: 不要用注释记录文件修改信息"></a>原则: 不要用注释记录文件修改信息</h4><p>都用git了， 不要在文件开头去记录xxx多久修改了啥。git信息里面都有。</p>
<h3 id="注释风格"><a href="#注释风格" class="headerlink" title="注释风格"></a>注释风格</h3><h4 id="原则-单行注释使用-多行注释-文件注释用"><a href="#原则-单行注释使用-多行注释-文件注释用" class="headerlink" title="原则: 单行注释使用 //, 多行注释 /** */, 文件注释用 / \/"></a>原则: 单行注释使用 //, 多行注释 /** */, 文件注释用 /<em> \</em>/</h4><p>推荐大家使用jsDoc风格的注释规范</p>
<h4 id="原则-注释和描述的代码相邻，放在代码上方，并且和代码的缩进一致。"><a href="#原则-注释和描述的代码相邻，放在代码上方，并且和代码的缩进一致。" class="headerlink" title="原则: 注释和描述的代码相邻，放在代码上方，并且和代码的缩进一致。"></a>原则: 注释和描述的代码相邻，放在代码上方，并且和代码的缩进一致。</h4><h4 id="原则-注释要和上方的代码块有间隔，间隔一行。-后空两格。"><a href="#原则-注释要和上方的代码块有间隔，间隔一行。-后空两格。" class="headerlink" title="原则: 注释要和上方的代码块有间隔，间隔一行。 // 后空两格。"></a>原则: 注释要和上方的代码块有间隔，间隔一行。 // 后空两格。</h4><h2 id="排版"><a href="#排版" class="headerlink" title="排版"></a>排版</h2><h3 id="风格"><a href="#风格" class="headerlink" title="风格"></a>风格</h3><p>排版可以从下面的维度出发，给出每个维度的建议项和原由，各团队可以自行商议。</p>
<h4 id="建议-团队内风格应该保持一致，大家商量，抛弃个人喜好"><a href="#建议-团队内风格应该保持一致，大家商量，抛弃个人喜好" class="headerlink" title="建议: 团队内风格应该保持一致，大家商量，抛弃个人喜好"></a>建议: 团队内风格应该保持一致，大家商量，抛弃个人喜好</h4><h4 id="建议-团队内将风格固化到IDE中，通过eslint，stylelint-editorConfig等来保证一致性。"><a href="#建议-团队内将风格固化到IDE中，通过eslint，stylelint-editorConfig等来保证一致性。" class="headerlink" title="建议: 团队内将风格固化到IDE中，通过eslint，stylelint, editorConfig等来保证一致性。"></a>建议: 团队内将风格固化到IDE中，通过eslint，stylelint, editorConfig等来保证一致性。</h4><h3 id="缩进"><a href="#缩进" class="headerlink" title="缩进"></a>缩进</h3><h4 id="原则-禁止使用制表符作为缩进"><a href="#原则-禁止使用制表符作为缩进" class="headerlink" title="原则: 禁止使用制表符作为缩进"></a>原则: 禁止使用制表符作为缩进</h4><p>制表符在不同IDE或者代码阅读器上面表现的风格不一致，有可能产生对齐错乱的问题。空格在不会有这样的问题。我们在开发中常使用tab键实现缩进，需要把tab设置为缩进空格。</p>
<h4 id="建议-缩进使用2个空格缩进。"><a href="#建议-缩进使用2个空格缩进。" class="headerlink" title="建议: 缩进使用2个空格缩进。"></a>建议: 缩进使用2个空格缩进。</h4><p>缩进过大，在嵌套过深的情况，需要拖动横向滚动条条才能阅读代码，不方便阅读。</p>
<h3 id="换行"><a href="#换行" class="headerlink" title="换行"></a>换行</h3><h4 id="建议-超长代码需要换行，换行时操作符放在前面"><a href="#建议-超长代码需要换行，换行时操作符放在前面" class="headerlink" title="建议: 超长代码需要换行，换行时操作符放在前面"></a>建议: 超长代码需要换行，换行时操作符放在前面</h4><p>推荐示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> resultA = xxx </span><br><span class="line">                ? <span class="string">'a'</span> : <span class="string">'b'</span>;</span><br><span class="line"><span class="keyword">const</span> resultB = xxxxxxxxxxxxA</span><br><span class="line">                &amp;&amp; xxxxxxxxxxB</span><br><span class="line">                &amp;&amp; xxxxxxxxxxC</span><br></pre></td></tr></table></figure></p>
<h4 id="建议-函数参数尽量在同一行，对于超长的场景每个参数独占一行。"><a href="#建议-函数参数尽量在同一行，对于超长的场景每个参数独占一行。" class="headerlink" title="建议: 函数参数尽量在同一行，对于超长的场景每个参数独占一行。"></a>建议: 函数参数尽量在同一行，对于超长的场景每个参数独占一行。</h4><p>推荐示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">someFunction</span>(<span class="params">arg1, arg2, arg3, arg4</span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">someLongerFunction</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    xxxxxxxxxxA,</span></span></span><br><span class="line"><span class="function"><span class="params">    xxxxxxxxxxB,</span></span></span><br><span class="line"><span class="function"><span class="params">    xxxxxxxxxxC,</span></span></span><br><span class="line"><span class="function"><span class="params">    xxxxxxxxxxD</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="建议-对象字面量超过4个，都应该换行"><a href="#建议-对象字面量超过4个，都应该换行" class="headerlink" title="建议: 对象字面量超过4个，都应该换行"></a>建议: 对象字面量超过4个，都应该换行</h4><p>不好的示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> airticle = &#123; <span class="attr">title</span>: <span class="string">'中国之声'</span>, <span class="attr">author</span>: <span class="string">'some people'</span>, <span class="attr">date</span>: <span class="string">'2012-02-01'</span>, <span class="attr">preview</span>: <span class="number">999</span>, <span class="attr">total</span>: <span class="number">334343</span> &#125;;</span><br></pre></td></tr></table></figure></p>
<p>推荐示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> airticle = &#123; </span><br><span class="line">    title: <span class="string">'中国之声'</span>, </span><br><span class="line">    author: <span class="string">'some people'</span>,</span><br><span class="line">    date: <span class="string">'2012-02-01'</span>,</span><br><span class="line">    preview: <span class="number">999</span>,</span><br><span class="line">    total: <span class="number">334343</span> </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h4 id="建议-链式调用对象时，一行最好不超过4个调用，可以改成每个独占一行。"><a href="#建议-链式调用对象时，一行最好不超过4个调用，可以改成每个独占一行。" class="headerlink" title="建议: 链式调用对象时，一行最好不超过4个调用，可以改成每个独占一行。"></a>建议: 链式调用对象时，一行最好不超过4个调用，可以改成每个独占一行。</h4><p>不好示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">someInstance.queryAll().find(<span class="string">'classA'</span>).forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> handle(item)).map(<span class="function"><span class="params">item</span> =&gt;</span> item.name).end()</span><br></pre></td></tr></table></figure></p>
<p>推荐示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">someInstance</span><br><span class="line">    .queryAll()</span><br><span class="line">    .find(<span class="string">'classA'</span>)</span><br><span class="line">    .forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> handle(item))</span><br><span class="line">    .map(<span class="function"><span class="params">item</span> =&gt;</span> item.name)</span><br><span class="line">    .end()</span><br></pre></td></tr></table></figure></p>
<h4 id="建议-else-和-if尾括号放在同一行，else-if同理"><a href="#建议-else-和-if尾括号放在同一行，else-if同理" class="headerlink" title="建议: else 和 if尾括号放在同一行，else if同理"></a>建议: else 和 if尾括号放在同一行，else if同理</h4><p>推荐示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> () &#123;</span><br><span class="line">    ....</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>不好示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> () &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="建议-设置每行的最大长度，超过最大行数需要换行。"><a href="#建议-设置每行的最大长度，超过最大行数需要换行。" class="headerlink" title="建议: 设置每行的最大长度，超过最大行数需要换行。"></a>建议: 设置每行的最大长度，超过最大行数需要换行。</h4><p>阅读代码最喜欢时从上到下阅读，不喜欢横向滚动条。推荐每行最大长度不超过180</p>
<h4 id="建议-条件语句过长的，可以将每个条件都放入当都一行，操作符放在开头"><a href="#建议-条件语句过长的，可以将每个条件都放入当都一行，操作符放在开头" class="headerlink" title="建议: 条件语句过长的，可以将每个条件都放入当都一行，操作符放在开头"></a>建议: 条件语句过长的，可以将每个条件都放入当都一行，操作符放在开头</h4><h3 id="空行"><a href="#空行" class="headerlink" title="空行"></a>空行</h3><h4 id="原则-不同的逻辑块之间空一行"><a href="#原则-不同的逻辑块之间空一行" class="headerlink" title="原则: 不同的逻辑块之间空一行"></a>原则: 不同的逻辑块之间空一行</h4><p>相对独立的代码块之间考虑换行（一般这个时候你需要提炼函数了-_-）。</p>
<h4 id="建议-class中，方法和方法之间需要换行。不同逻辑区间的属性之间换行。"><a href="#建议-class中，方法和方法之间需要换行。不同逻辑区间的属性之间换行。" class="headerlink" title="建议: class中，方法和方法之间需要换行。不同逻辑区间的属性之间换行。"></a>建议: class中，方法和方法之间需要换行。不同逻辑区间的属性之间换行。</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> People &#123;</span><br><span class="line">    age: <span class="number">36</span>,</span><br><span class="line">    sex: <span class="string">'male'</span>,</span><br><span class="line">    career: <span class="string">'teacher'</span>,</span><br><span class="line"></span><br><span class="line">    isFlag: <span class="literal">false</span>,</span><br><span class="line">    isRegisted: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    children: [],</span><br><span class="line">    parent: &#123;&#125;</span><br><span class="line"></span><br><span class="line">    checkValid() &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handleError() &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="原则-方法体、块语句、类的开始或者末尾不要有空行。"><a href="#原则-方法体、块语句、类的开始或者末尾不要有空行。" class="headerlink" title="原则: 方法体、块语句、类的开始或者末尾不要有空行。"></a>原则: 方法体、块语句、类的开始或者末尾不要有空行。</h4><h4 id="建议-一般情况下，不要使用连续空行。"><a href="#建议-一般情况下，不要使用连续空行。" class="headerlink" title="建议: 一般情况下，不要使用连续空行。"></a>建议: 一般情况下，不要使用连续空行。</h4><h3 id="空格"><a href="#空格" class="headerlink" title="空格"></a>空格</h3><h4 id="建议-关键字周围空格一致性"><a href="#建议-关键字周围空格一致性" class="headerlink" title="建议: 关键字周围空格一致性"></a>建议: 关键字周围空格一致性</h4><ol>
<li>在保留字(if, for while) 和左括号( 之间添加一个空格</li>
<li>else catch 与 关闭花括号 } 之间添加一个空格</li>
<li><p>在任何打开花括号前添加一个空格, (函数参数和<code></code>模板中去除外)</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 下面这三种情况除外</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">too</span>(<span class="params">&#123; name &#125;</span>) </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">[ name ]</span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">const</span> str = <span class="string">`#<span class="subst">$&#123;s&#125;</span>`</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在任何三元或者二元操作符的两侧增加一个空格</p>
</li>
<li>数组和函数参数逗号, 后面添加一个空格，前面不要增加空格。</li>
<li>; 前面不要空格</li>
<li><p>单行 {} 内侧需要一个空格</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> objA = &#123; name: <span class="string">'xxx'</span>, total: <span class="number">2</span> &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>数组[]内侧不要有空格 [a, b, c]，不要[ a, b ]。</p>
</li>
<li>禁止出现多个空格，除注释和缩进外。</li>
</ol>
<h3 id="花括号"><a href="#花括号" class="headerlink" title="花括号"></a>花括号</h3><h4 id="建议-总是给代码执行体添加"><a href="#建议-总是给代码执行体添加" class="headerlink" title="建议: 总是给代码执行体添加{}"></a>建议: 总是给代码执行体添加{}</h4><p>while, if, for, do，即使执行语句只有一行。<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (result) foo++;</span><br></pre></td></tr></table></figure></p>
<p>上面这种看着很酷，如果需要多写一个语句，就需要三行的改动，如果我们事先添加好花括号。改动只有一行，出错的机率大幅度减低。血的教训——__——。</p>
<h4 id="建议-花括号要和语句在一行"><a href="#建议-花括号要和语句在一行" class="headerlink" title="建议: 花括号要和语句在一行"></a>建议: 花括号要和语句在一行</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Xxx &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不好示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Xxx </span><br><span class="line">&#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="建议-对象字面量和数组中使用拖尾逗号"><a href="#建议-对象字面量和数组中使用拖尾逗号" class="headerlink" title="建议: 对象字面量和数组中使用拖尾逗号,"></a>建议: 对象字面量和数组中使用拖尾逗号,</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    keyA: <span class="string">'xxx'</span>,</span><br><span class="line">    keyB: <span class="string">'xxx'</span>,  <span class="comment">// 拖尾逗号</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> someArray = [<span class="string">'xxxA'</span>, <span class="string">'xxxB'</span>,]</span><br></pre></td></tr></table></figure>
<h4 id="建议-每行代码句后添加分号。"><a href="#建议-每行代码句后添加分号。" class="headerlink" title="建议: 每行代码句后添加分号。"></a>建议: 每行代码句后添加分号。</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这个代码会被解析 some = 'xxx'; 而不是 some = getSome;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getSome</span>(<span class="params">arg1</span>) </span>&#123; <span class="keyword">return</span> arg1; &#125;</span><br><span class="line"><span class="keyword">const</span> some = getSome</span><br><span class="line">(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'xxx'</span></span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这个代码会被解析成 return; &#123; .... &#125;;</span></span><br><span class="line"><span class="keyword">return</span> </span><br><span class="line">&#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="建议-单文件长度最好不要超过1500行，尽可能的考虑拆分"><a href="#建议-单文件长度最好不要超过1500行，尽可能的考虑拆分" class="headerlink" title="建议: 单文件长度最好不要超过1500行，尽可能的考虑拆分"></a>建议: 单文件长度最好不要超过1500行，尽可能的考虑拆分</h4><h4 id="建议-单个方法长度不要超过50行"><a href="#建议-单个方法长度不要超过50行" class="headerlink" title="建议: 单个方法长度不要超过50行"></a>建议: 单个方法长度不要超过50行</h4><h4 id="建议-圈复杂度不要超过20"><a href="#建议-圈复杂度不要超过20" class="headerlink" title="建议: 圈复杂度不要超过20"></a>建议: 圈复杂度不要超过20</h4><h4 id="建议-块嵌套深度不超过4层。if语句判断等"><a href="#建议-块嵌套深度不超过4层。if语句判断等" class="headerlink" title="建议: 块嵌套深度不超过4层。if语句判断等"></a>建议: 块嵌套深度不超过4层。if语句判断等</h4><h4 id="建议-回调深读不超过4层。"><a href="#建议-回调深读不超过4层。" class="headerlink" title="建议: 回调深读不超过4层。"></a>建议: 回调深读不超过4层。</h4><h3 id="变量-1"><a href="#变量-1" class="headerlink" title="变量"></a>变量</h3><h4 id="原则-优先使用const，其次let。非特殊场景不使用var"><a href="#原则-优先使用const，其次let。非特殊场景不使用var" class="headerlink" title="原则: 优先使用const，其次let。非特殊场景不使用var"></a>原则: 优先使用const，其次let。非特殊场景不使用var</h4><h4 id="原则-在使用地方申明变量，且尽快初始化"><a href="#原则-在使用地方申明变量，且尽快初始化" class="headerlink" title="原则: 在使用地方申明变量，且尽快初始化"></a>原则: 在使用地方申明变量，且尽快初始化</h4><h4 id="原则-每行申明一个变量，结构和for循环除外"><a href="#原则-每行申明一个变量，结构和for循环除外" class="headerlink" title="原则: 每行申明一个变量，结构和for循环除外"></a>原则: 每行申明一个变量，结构和for循环除外</h4><ol>
<li>方便阅读</li>
<li>在debug模式下，可以按行阅读。单行代码无法优美的查看（大雾）。<br>不好示例<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> varA = <span class="string">'nb'</span>, B = <span class="number">123</span>;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>推荐示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> varA = <span class="string">'nb'</span>;</span><br><span class="line"><span class="keyword">const</span> varB = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = arr.length; i &lt; len; i++) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [varA, varB] = [<span class="string">'nb'</span>, <span class="number">123</span>]</span><br></pre></td></tr></table></figure></p>
<h4 id="建议-申明阶段禁止连续赋值"><a href="#建议-申明阶段禁止连续赋值" class="headerlink" title="建议: 申明阶段禁止连续赋值"></a>建议: 申明阶段禁止连续赋值</h4><h4 id="建议-变量不需要使用undefined来初始化"><a href="#建议-变量不需要使用undefined来初始化" class="headerlink" title="建议: 变量不需要使用undefined来初始化"></a>建议: 变量不需要使用undefined来初始化</h4><p>未赋值的变量会默认有一个undefined的初始值(????)</p>
<h4 id="建议-非特殊情况一般使用基础类型的字面量来初始化，而不是封装类型。"><a href="#建议-非特殊情况一般使用基础类型的字面量来初始化，而不是封装类型。" class="headerlink" title="建议: 非特殊情况一般使用基础类型的字面量来初始化，而不是封装类型。"></a>建议: 非特殊情况一般使用基础类型的字面量来初始化，而不是封装类型。</h4><p>不好的示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> stringA = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'A'</span>);</span><br><span class="line"><span class="keyword">const</span> numberB = <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">123</span>);</span><br><span class="line"><span class="built_in">console</span>.log(numberB + <span class="number">1</span>) <span class="comment">//  124;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 会有语义上的不明确</span></span><br><span class="line"><span class="keyword">const</span> arrA = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>); <span class="comment">// [3, 4, 5]</span></span><br><span class="line"><span class="keyword">const</span> arrA = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">4</span>)  <span class="comment">// [empty * 4]   语义不明确</span></span><br><span class="line"><span class="keyword">const</span> arrC = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">'4'</span>)  <span class="comment">// ['4']  // 语义不明确</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 考虑可读性和冗余性，对象也是</span></span><br><span class="line"><span class="keyword">const</span> objA = <span class="keyword">new</span> <span class="built_in">Object</span>(&#123;</span><br><span class="line">    keyA: <span class="string">'longfor'</span>,</span><br><span class="line">    keyB: <span class="number">123</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h4 id="建议-内部作用域变量不要覆盖外部作用域变量"><a href="#建议-内部作用域变量不要覆盖外部作用域变量" class="headerlink" title="建议: 内部作用域变量不要覆盖外部作用域变量"></a>建议: 内部作用域变量不要覆盖外部作用域变量</h4><p>会导致更深层次的代码无法获取到想要的变量，在后续变更操作中，增加出错风险。</p>
<p>不好示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> aa = <span class="number">1</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> aa = <span class="number">2</span>;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 如果c函数需要知道a函数中aa咋办???????</span></span><br><span class="line">            <span class="built_in">console</span>.log(aa)</span><br><span class="line">        &#125;</span><br><span class="line">        c()</span><br><span class="line">    &#125;</span><br><span class="line">    b()</span><br><span class="line">&#125;</span><br><span class="line">a()</span><br></pre></td></tr></table></figure></p>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><h4 id="建议-方法的参数不超过5个"><a href="#建议-方法的参数不超过5个" class="headerlink" title="建议: 方法的参数不超过5个"></a>建议: 方法的参数不超过5个</h4><p>超过5个的参数，将逻辑关联的参数放入对一个对象中。</p>
<h4 id="建议-函数参数指定默认参数，不是使用-指定默认参数"><a href="#建议-函数参数指定默认参数，不是使用-指定默认参数" class="headerlink" title="建议: 函数参数指定默认参数，不是使用 || 指定默认参数"></a>建议: 函数参数指定默认参数，不是使用 || 指定默认参数</h4><p>不好示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果 a = false 或 a = ''；enummmmm.....</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    a = a || <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="建议-永远不要改变参数的值。"><a href="#建议-永远不要改变参数的值。" class="headerlink" title="建议: 永远不要改变参数的值。"></a>建议: 永远不要改变参数的值。</h4><ol>
<li>如果函数中新增加一个功能，需要用到参数的原始值，想要一下需要改动的地方有多少。</li>
<li>如果参数是引用传参，改变参数的属性会导致修改传入外部，造成一些不必要的问题。<h4 id="建议-默认参数放在最后面"><a href="#建议-默认参数放在最后面" class="headerlink" title="建议: 默认参数放在最后面"></a>建议: 默认参数放在最后面</h4>默认参数放在前面，需要写undefined来占位，放在后面可以不用。<br>不好示例<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">argA = &#123;&#125;, argB</span>) </span>&#123;&#125;</span><br><span class="line">test(<span class="literal">undefined</span>, <span class="string">'test'</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>推荐示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">argB, argA = &#123;&#125;</span>) </span>&#123;&#125;</span><br><span class="line">test(<span class="string">'test'</span>);  <span class="comment">// cool....。</span></span><br></pre></td></tr></table></figure></p>
<h4 id="建议-es6不要使用arguments-请rest替代"><a href="#建议-es6不要使用arguments-请rest替代" class="headerlink" title="建议: es6不要使用arguments, 请rest替代"></a>建议: es6不要使用arguments, 请rest替代</h4><ol>
<li>箭头函数不存在arguments</li>
<li>arguments只是类数组，操作不方便</li>
</ol>
<h4 id="建议-对于外部API，始终对参数进行校验。"><a href="#建议-对于外部API，始终对参数进行校验。" class="headerlink" title="建议: 对于外部API，始终对参数进行校验。"></a>建议: 对于外部API，始终对参数进行校验。</h4><p>为了保证健壮性，防御性编程不可少(大雾)</p>
<h4 id="建议-优先使用参数结构"><a href="#建议-优先使用参数结构" class="headerlink" title="建议: 优先使用参数结构"></a>建议: 优先使用参数结构</h4><h3 id="申明与实现"><a href="#申明与实现" class="headerlink" title="申明与实现"></a>申明与实现</h3><h4 id="原则-函数申明一致性"><a href="#原则-函数申明一致性" class="headerlink" title="原则: 函数申明一致性"></a>原则: 函数申明一致性</h4><p>函数有表达式声明和function申明。有如下区别</p>
<ol>
<li>function申明会将申明提升到作用域顶级，可以在申明前调用</li>
<li>表达式申明不会提升，在申请前使用会出错(not a function)<br>团队应该选择统一的风格来实现，推荐使用表达式申明。</li>
</ol>
<h4 id="建议-匿名函数优先使用箭头函数"><a href="#建议-匿名函数优先使用箭头函数" class="headerlink" title="建议: 匿名函数优先使用箭头函数"></a>建议: 匿名函数优先使用箭头函数</h4><p>普通函数和箭头函数性能和开销没有太大差别，但是匿名函数没有this的困扰(^-^)。</p>
<h4 id="原则-箭头函数参数风格一致性"><a href="#原则-箭头函数参数风格一致性" class="headerlink" title="原则: 箭头函数参数风格一致性"></a>原则: 箭头函数参数风格一致性</h4><p>有下面有两种风格</p>
<ol>
<li><p>只有一个参数的情况下去参数括号。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> test = <span class="function"><span class="params">argA</span> =&gt;</span> argA * <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>总是添加参数括号</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> test = <span class="function">(<span class="params">argA</span>) =&gt;</span> argA * <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>推荐第二种方式，没有花括号的方式会有阅读上的停顿。</p>
<h4 id="原则-箭头函数return风格一致性"><a href="#原则-箭头函数return风格一致性" class="headerlink" title="原则: 箭头函数return风格一致性"></a>原则: 箭头函数return风格一致性</h4><p>同上，方法体只有一个return 语句，是不是需要添加花括号。推荐总是添加花括号，丑一点但是方便断点调试。</p>
<h4 id="建议-函数有多个返回参数时使用对象解构"><a href="#建议-函数有多个返回参数时使用对象解构" class="headerlink" title="建议: 函数有多个返回参数时使用对象解构"></a>建议: 函数有多个返回参数时使用对象解构</h4><p>优先使用对象结构而不是数组解构。不然冷不丁出现这种<code>const [a,,b,,c] = [1,1,1,1,1,1]</code></p>
<h2 id="类与对象"><a href="#类与对象" class="headerlink" title="类与对象"></a>类与对象</h2><h3 id="类-1"><a href="#类-1" class="headerlink" title="类"></a>类</h3><h4 id="建议-优先采用class定义类"><a href="#建议-优先采用class定义类" class="headerlink" title="建议: 优先采用class定义类"></a>建议: 优先采用class定义类</h4><ol>
<li>class关键字定义类简洁，而且逻辑更易于阅读。</li>
<li>不仅仅时语法糖，class的构造函数有特殊的内部属性<code>[[IsClassConstructor]]: true</code>, 可以防止被作为普通函数使用。</li>
<li><code>String(SomeClass)</code> 会得到什么?   – class SomeClass {}</li>
</ol>
<h4 id="建议-使用extends来实现继承。"><a href="#建议-使用extends来实现继承。" class="headerlink" title="建议: 使用extends来实现继承。"></a>建议: 使用extends来实现继承。</h4><h4 id="原则-构造函数中禁止在super-前调用this或者super-xx"><a href="#原则-构造函数中禁止在super-前调用this或者super-xx" class="headerlink" title="原则: 构造函数中禁止在super() 前调用this或者super.xx"></a>原则: 构造函数中禁止在super() 前调用this或者super.xx</h4><h4 id="建议-在构造函数中申明所有的属性和方法。"><a href="#建议-在构造函数中申明所有的属性和方法。" class="headerlink" title="建议: 在构造函数中申明所有的属性和方法。"></a>建议: 在构造函数中申明所有的属性和方法。</h4><p>不要在类实例化后再动态添加属性, 如果一个属性实在执行时被赋值的，也需要先申明，方便VM优化。</p>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><h4 id="建议-优先使用单引号"><a href="#建议-优先使用单引号" class="headerlink" title="建议: 优先使用单引号"></a>建议: 优先使用单引号</h4><p>当你创建一个包含html代码时候就知道了</p>
<h4 id="建议-字符串使用模板字符串"><a href="#建议-字符串使用模板字符串" class="headerlink" title="建议: 字符串使用模板字符串"></a>建议: 字符串使用模板字符串</h4><p>可阅读性，一堆 + 很难阅读，特别时字符串中带有 + 时。</p>
<h4 id="原则-不使用-字符串行连续符号。"><a href="#原则-不使用-字符串行连续符号。" class="headerlink" title="原则: 不使用\字符串行连续符号。"></a>原则: 不使用\字符串行连续符号。</h4><p>当你在\ 后面加个空格时，找代码会找的你怀疑人生。 直接写在一行，大部分IED会处理用多行来显示一行。</p>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><h4 id="建议-添加元素使用数组的push方法，而不是索引赋值"><a href="#建议-添加元素使用数组的push方法，而不是索引赋值" class="headerlink" title="建议: 添加元素使用数组的push方法，而不是索引赋值"></a>建议: 添加元素使用数组的push方法，而不是索引赋值</h4><p>数组的length有长度限制，push会检查并抛错，赋值没有。极限情况下出现length不更新问题。</p>
<h4 id="建议-不在数组定义非数字索引"><a href="#建议-不在数组定义非数字索引" class="headerlink" title="建议: 不在数组定义非数字索引"></a>建议: 不在数组定义非数字索引</h4><p>有特殊场景需要添加，建议替换成map或者set。</p>
<h4 id="建议-数组遍历优先使用数组上方法"><a href="#建议-数组遍历优先使用数组上方法" class="headerlink" title="建议: 数组遍历优先使用数组上方法"></a>建议: 数组遍历优先使用数组上方法</h4><h4 id="建议-除特殊场景，-不要使用for-in遍历数组。"><a href="#建议-除特殊场景，-不要使用for-in遍历数组。" class="headerlink" title="建议: 除特殊场景， 不要使用for in遍历数组。"></a>建议: 除特殊场景， 不要使用for in遍历数组。</h4><h4 id="建议-forEach中不要对数组进行增加删除操作"><a href="#建议-forEach中不要对数组进行增加删除操作" class="headerlink" title="建议: forEach中不要对数组进行增加删除操作"></a>建议: forEach中不要对数组进行增加删除操作</h4><h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><h4 id="建议-对象字面量属性名统一风格，不加引号。"><a href="#建议-对象字面量属性名统一风格，不加引号。" class="headerlink" title="建议: 对象字面量属性名统一风格，不加引号。"></a>建议: 对象字面量属性名统一风格，不加引号。</h4><p>非特殊场景不使用混搭风格<br>不好示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> objA = &#123;</span><br><span class="line">    <span class="string">'name'</span>: <span class="string">'AAA'</span>,</span><br><span class="line">    title: <span class="string">'welcome to AAA'</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 特殊情况</span></span><br><span class="line">    <span class="string">'some-one'</span>: <span class="string">'123'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="建议-尽量在申明时将所有属性申明好，少动态添加。"><a href="#建议-尽量在申明时将所有属性申明好，少动态添加。" class="headerlink" title="建议: 尽量在申明时将所有属性申明好，少动态添加。"></a>建议: 尽量在申明时将所有属性申明好，少动态添加。</h4><h4 id="建议-对象字面量中，方法使用简写。"><a href="#建议-对象字面量中，方法使用简写。" class="headerlink" title="建议: 对象字面量中，方法使用简写。"></a>建议: 对象字面量中，方法使用简写。</h4><p>推荐示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> objA = &#123;</span><br><span class="line">    key: <span class="string">'a'</span>,</span><br><span class="line">    getKey() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>不好示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> objA = &#123;</span><br><span class="line">    key: <span class="string">'a'</span>,</span><br><span class="line">    getKey: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="建议-推荐使用对象字面量中使用简写属性"><a href="#建议-推荐使用对象字面量中使用简写属性" class="headerlink" title="建议: 推荐使用对象字面量中使用简写属性"></a>建议: 推荐使用对象字面量中使用简写属性</h4><p>推荐示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> key = <span class="string">'a'</span></span><br><span class="line"><span class="keyword">const</span> objA = &#123;</span><br><span class="line">    key,</span><br><span class="line">    getKey() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>不好示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> key = <span class="string">'a'</span></span><br><span class="line"><span class="keyword">const</span> objA = &#123;</span><br><span class="line">    key: key,</span><br><span class="line">    getKey() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="建议-使用-号来访问属性方法，只有动态情况或者数字索引下采用-访问"><a href="#建议-使用-号来访问属性方法，只有动态情况或者数字索引下采用-访问" class="headerlink" title="建议: 使用.号来访问属性方法，只有动态情况或者数字索引下采用[]访问"></a>建议: 使用.号来访问属性方法，只有动态情况或者数字索引下采用[]访问</h4><h4 id="原则-get-和-set-必须成对出现，否则没有意义。"><a href="#原则-get-和-set-必须成对出现，否则没有意义。" class="headerlink" title="原则: get 和 set 必须成对出现，否则没有意义。"></a>原则: get 和 set 必须成对出现，否则没有意义。</h4><p>如果只有get，表示该属性只可读，不可写。<br>如果只有set，表示该属性只可写，不可读。</p>
<h4 id="原则-禁止在对象上使用Object-proptotype-的内置属性，用call代替"><a href="#原则-禁止在对象上使用Object-proptotype-的内置属性，用call代替" class="headerlink" title="原则: 禁止在对象上使用Object.proptotype 的内置属性，用call代替"></a>原则: 禁止在对象上使用Object.proptotype 的内置属性，用call代替</h4><p>如果一个来自外部的JSON <code>resData = { hasOwnProperty: 1 }</code>; 如果调用<code>resData.hasOwnProperty()</code> 就会出现安全风险。用<code>Object.proptotype.hasOwnProperty.call(resData)</code> 则不会。</p>
<h4 id="建议-for-in循环对象需要约束"><a href="#建议-for-in循环对象需要约束" class="headerlink" title="建议: for in循环对象需要约束"></a>建议: for in循环对象需要约束</h4><p>for in 会将原型链上的属性包括进来，建议使用Object.prototype.hasOwnProperty() 过滤，或者直接使用Object.keys转成数组循环。</p>
<h4 id="建议-严禁对内置的类型添加修改属性方法。"><a href="#建议-严禁对内置的类型添加修改属性方法。" class="headerlink" title="建议: 严禁对内置的类型添加修改属性方法。"></a>建议: 严禁对内置的类型添加修改属性方法。</h4><p>常见在String.prototype 上面添加方法等。</p>
<h2 id="运算和表达式"><a href="#运算和表达式" class="headerlink" title="运算和表达式"></a>运算和表达式</h2><h3 id="条件表达式"><a href="#条件表达式" class="headerlink" title="条件表达式"></a>条件表达式</h3><h4 id="建议-条件表达式中，变量在先，表达式在后。"><a href="#建议-条件表达式中，变量在先，表达式在后。" class="headerlink" title="建议: 条件表达式中，变量在先，表达式在后。"></a>建议: 条件表达式中，变量在先，表达式在后。</h4><p>有种观点时变量在后面，为了防止 <code>if (a = 1) {}</code>这种低级错误出现。不过为了可阅读性，我们推荐变量的在前面，配合现在IDE，可以避免这种错误。</p>
<h4 id="建议-总使用-和-，-不使用-和"><a href="#建议-总使用-和-，-不使用-和" class="headerlink" title="建议: 总使用 === 和 !==， 不使用 == 和 !="></a>建议: 总使用 === 和 !==， 不使用 == 和 !=</h4><p>==和!=对于新人来说难以掌握，而且也不利于阅读。所有 == 和 != 的场景都可以用 === 和 !== 表示出来。</p>
<h4 id="建议-条件语句尽量简单"><a href="#建议-条件语句尽量简单" class="headerlink" title="建议: 条件语句尽量简单"></a>建议: 条件语句尽量简单</h4><p>不好示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isValid === <span class="literal">true</span>) &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> isFinished = condition ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br></pre></td></tr></table></figure></p>
<h4 id="建议-不要在一个复杂的条件表达式最前面添加否定"><a href="#建议-不要在一个复杂的条件表达式最前面添加否定" class="headerlink" title="建议: 不要在一个复杂的条件表达式最前面添加否定!"></a>建议: 不要在一个复杂的条件表达式最前面添加否定!</h4><p>不好示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!((person.flag === <span class="number">0</span> &amp;&amp; person.age &gt; <span class="number">65</span>) || person.sex === <span class="number">1</span>)) &#123;  <span class="comment">// 来读读这个是啥意思</span></span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>需要否定的地方，用数学知识处理一下，解开括号。原则是 AND-OR互换，!抵消。括号加在 OR 中，从左到右依赖删除括号。对<code>!(!conditionA || !conditionB &amp;&amp; conditionC)</code> 举例。</p>
<ol>
<li>AND-OR互换:  <code>!!conditionA &amp;&amp; !!conditionB || !conditionC</code></li>
<li>! 抵消: <code>conditionA &amp;&amp; conditionB || !conditionC</code></li>
<li>括号加在 OR 中 <code>conditionA &amp;&amp; (conditionB || !conditionC)</code></li>
<li>观察是否能够消除括号，这个例子不能消除括号。<h4 id="建议-非特殊场景，if-else-条件判断不要否定在前"><a href="#建议-非特殊场景，if-else-条件判断不要否定在前" class="headerlink" title="建议: 非特殊场景，if else 条件判断不要否定在前"></a>建议: 非特殊场景，if else 条件判断不要否定在前</h4></li>
</ol>
<h4 id="建议-禁止使用嵌套的三元表达式"><a href="#建议-禁止使用嵌套的三元表达式" class="headerlink" title="建议: 禁止使用嵌套的三元表达式"></a>建议: 禁止使用嵌套的三元表达式</h4><p>嵌套的三元表示式需要用栈的思维来阅读。建议多写几个if替代。</p>
<h4 id="建议-混合条件表示式，使用括号来标记运算顺序。"><a href="#建议-混合条件表示式，使用括号来标记运算顺序。" class="headerlink" title="建议: 混合条件表示式，使用括号来标记运算顺序。"></a>建议: 混合条件表示式，使用括号来标记运算顺序。</h4><h4 id="建议-每个switch语句总是有default，即使default里面为空"><a href="#建议-每个switch语句总是有default，即使default里面为空" class="headerlink" title="建议: 每个switch语句总是有default，即使default里面为空"></a>建议: 每个switch语句总是有default，即使default里面为空</h4><p>防御性编程意识不可少，当定义了default，就会想switch的错误场景。</p>
<h4 id="建议-非特殊场景，总是给每个case添加break"><a href="#建议-非特殊场景，总是给每个case添加break" class="headerlink" title="建议: 非特殊场景，总是给每个case添加break"></a>建议: 非特殊场景，总是给每个case添加break</h4><h4 id="建议-总是给每个case的执行体添加花括号"><a href="#建议-总是给每个case的执行体添加花括号" class="headerlink" title="建议: 总是给每个case的执行体添加花括号{}"></a>建议: 总是给每个case的执行体添加花括号{}</h4><p>switch中，每个case都在switch代码块，作用域共享。为了防止出错，建议给每个case添加花括号形成块作用域。</p>
<p>推荐示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (code) &#123;</span><br><span class="line">    <span class="keyword">case</span>: <span class="string">'0000'</span>: &#123;</span><br><span class="line">        ....</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="正则"><a href="#正则" class="headerlink" title="正则"></a>正则</h3><h4 id="原则-正则表达式中不要出现连续空格"><a href="#原则-正则表达式中不要出现连续空格" class="headerlink" title="原则: 正则表达式中不要出现连续空格"></a>原则: 正则表达式中不要出现连续空格</h4><p>不好示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> testReg = <span class="regexp">/test    test/</span>;  <span class="comment">// 你能直接知道是几个空格吗</span></span><br></pre></td></tr></table></figure></p>
<p>推荐示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> testReg = <span class="regexp">/test &#123;4&#125;test/</span></span><br></pre></td></tr></table></figure></p>
<h4 id="建议-总是使用具名捕获组"><a href="#建议-总是使用具名捕获组" class="headerlink" title="建议: 总是使用具名捕获组"></a>建议: 总是使用具名捕获组</h4><p>比如 <code>&#39;web-doc&#39;.match(/-(?&lt;customName&gt;\w)/).groups</code>，可以得到 <code>{ customName: &#39;d&#39; }</code></p>
<h2 id="一些特性"><a href="#一些特性" class="headerlink" title="一些特性"></a>一些特性</h2><h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><h4 id="建议-不要在顶层作用域申明函数变量"><a href="#建议-不要在顶层作用域申明函数变量" class="headerlink" title="建议: 不要在顶层作用域申明函数变量"></a>建议: 不要在顶层作用域申明函数变量</h4><p>一般情况下，大部分人会忘记顶层作用域就是全局作用域。如果要申明，应该显示的申明到windows或者global上。</p>
<h4 id="建议-谨慎添加window上属性。"><a href="#建议-谨慎添加window上属性。" class="headerlink" title="建议: 谨慎添加window上属性。"></a>建议: 谨慎添加window上属性。</h4><p>尽可能用命名空间实现，给windows挂载一个特殊的属性，剩下的挂在在这个属性下面。参考jquery 或者underscore</p>
<h3 id="数字"><a href="#数字" class="headerlink" title="数字"></a>数字</h3><h4 id="建议-禁止省略小数点前后的0"><a href="#建议-禁止省略小数点前后的0" class="headerlink" title="建议: 禁止省略小数点前后的0"></a>建议: 禁止省略小数点前后的0</h4><p>好好写嘛</p>
<p>不好示例<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numA = <span class="number">.5</span>;</span><br><span class="line"><span class="keyword">const</span> numB = <span class="number">2.</span>;</span><br><span class="line"><span class="keyword">const</span> numC = <span class="number">-.9</span>;</span><br></pre></td></tr></table></figure></p>
<h4 id="原则-使用isNaN-来检查NaN"><a href="#原则-使用isNaN-来检查NaN" class="headerlink" title="原则: 使用isNaN() 来检查NaN"></a>原则: 使用isNaN() 来检查NaN</h4><h3 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h3><h4 id="建议-异常的原则"><a href="#建议-异常的原则" class="headerlink" title="建议: 异常的原则"></a>建议: 异常的原则</h4><ol>
<li>异常总是Error子类或者Error</li>
<li>优先考虑内置异常， 不满足情况下使用自定义异常</li>
<li>捕获的异常不处理需要注释说明</li>
</ol>
<h4 id="建议-promise中reject总是返回异常，而不是其他"><a href="#建议-promise中reject总是返回异常，而不是其他" class="headerlink" title="建议: promise中reject总是返回异常，而不是其他;"></a>建议: promise中reject总是返回异常，而不是其他;</h4><p>Promise rejct 返回 Error可以看到错误栈，方便调试，断点神器。</p>
<h3 id="异步"><a href="#异步" class="headerlink" title="异步"></a>异步</h3><h4 id="原则-不要-return-await写法"><a href="#原则-不要-return-await写法" class="headerlink" title="原则: 不要 return await写法"></a>原则: 不要 return await写法</h4><p>直接return，async 本身会返回Promise对象。</p>
<h3 id="杂谈"><a href="#杂谈" class="headerlink" title="杂谈"></a>杂谈</h3><h4 id="建议-一般不使用eval，如果需要，务必需要多人评审。"><a href="#建议-一般不使用eval，如果需要，务必需要多人评审。" class="headerlink" title="建议: 一般不使用eval，如果需要，务必需要多人评审。"></a>建议: 一般不使用eval，如果需要，务必需要多人评审。</h4><h4 id="原则-防止出现隐形eval"><a href="#原则-防止出现隐形eval" class="headerlink" title="原则: 防止出现隐形eval"></a>原则: 防止出现隐形eval</h4><p>setTimeout 和 setInterval第一个参数为字符串时，和eval一样。不过大部分浏览器会拦截这个漏洞。</p>
<h4 id="原则-非特殊场景不用with"><a href="#原则-非特殊场景不用with" class="headerlink" title="原则: 非特殊场景不用with"></a>原则: 非特殊场景不用with</h4><p>with可以提升性能，如果掌握不好会有一定的安全风险，比如在语义不明的情况，开发可能错误的执行了某个对象上的方法。建议团队评估后使用。</p>
<h4 id="建议-类型转换都用显示的方法处理，不要短符号实现。"><a href="#建议-类型转换都用显示的方法处理，不要短符号实现。" class="headerlink" title="建议: 类型转换都用显示的方法处理，不要短符号实现。"></a>建议: 类型转换都用显示的方法处理，不要短符号实现。</h4><ol>
<li>布尔类型: 用 <code>Boolean(numA)</code> 代替 <code>!!numA</code></li>
<li>数字类型: 用 <code>Number(strA)</code> 代替 <code>+strA</code></li>
<li>其余类推</li>
</ol>
<h4 id="原则-DOM卸载时，务必移除事件绑定。"><a href="#原则-DOM卸载时，务必移除事件绑定。" class="headerlink" title="原则: DOM卸载时，务必移除事件绑定。"></a>原则: DOM卸载时，务必移除事件绑定。</h4><p>不然哪天内存泄漏都找不到原因，引用计数GC的浏览器有这个问题。</p>
<h4 id="原则-及时清理定时器和延时器"><a href="#原则-及时清理定时器和延时器" class="headerlink" title="原则: 及时清理定时器和延时器"></a>原则: 及时清理定时器和延时器</h4><p>同样会导致内存泄漏，还要</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/archives/355afdd9.html" rel="next" title="github-action">
                <i class="fa fa-chevron-left"></i> github-action
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/archives/a8ae78e0.html" rel="prev" title="vuex-db设计">
                vuex-db设计 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>

  

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/uploads/avatar.png" alt="yangmanman">
            
              <p class="site-author-name" itemprop="name">yangmanman</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">106</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/xunserver" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Javascript-编码规范"><span class="nav-number">1.</span> <span class="nav-text">Javascript 编码规范</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#术语"><span class="nav-number">1.1.</span> <span class="nav-text">术语</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#命令"><span class="nav-number">1.2.</span> <span class="nav-text">命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#文件"><span class="nav-number">1.2.1.</span> <span class="nav-text">文件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-不使用index文件实现逻辑，index用于聚合导出。"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">建议: 不使用index文件实现逻辑，index用于聚合导出。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#命名原则"><span class="nav-number">1.2.2.</span> <span class="nav-text">命名原则</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-源文件编码格式（包括注释）必须是UTF-8"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">原则: 源文件编码格式（包括注释）必须是UTF-8</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-方法、变量需要一个好名字"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">原则: 方法、变量需要一个好名字</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类"><span class="nav-number">1.2.3.</span> <span class="nav-text">类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-构造函数、类命名都是用大驼峰"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">原则: 构造函数、类命名都是用大驼峰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-方法命名使用动词、动宾结构，并遵守驼峰原则"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">原则: 方法命名使用动词、动宾结构，并遵守驼峰原则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-方法名不能过长影响可读性"><span class="nav-number">1.2.3.3.</span> <span class="nav-text">原则: 方法名不能过长影响可读性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-私有属性或者方法，-建议以下划线-开头"><span class="nav-number">1.2.3.4.</span> <span class="nav-text">建议: 私有属性或者方法， 建议以下划线_开头</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#变量"><span class="nav-number">1.2.4.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-变量名遵循驼峰风格-首字母大写，后续每个单词小写"><span class="nav-number">1.2.4.1.</span> <span class="nav-text">原则: 变量名遵循驼峰风格, 首字母大写，后续每个单词小写</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-避免使用否定的布尔变量名"><span class="nav-number">1.2.4.2.</span> <span class="nav-text">建议: 避免使用否定的布尔变量名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-缩写词应该全部大写或者小写，不要混搭。"><span class="nav-number">1.2.4.3.</span> <span class="nav-text">建议: 缩写词应该全部大写或者小写，不要混搭。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-不要用保留字作为键名或者变量名，使用同义词。"><span class="nav-number">1.2.4.4.</span> <span class="nav-text">原则: 不要用保留字作为键名或者变量名，使用同义词。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-常量使用全部大写并且用下划线-分隔"><span class="nav-number">1.2.4.5.</span> <span class="nav-text">原则: 常量使用全部大写并且用下划线_分隔</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#注释"><span class="nav-number">1.3.</span> <span class="nav-text">注释</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#注释原则"><span class="nav-number">1.3.1.</span> <span class="nav-text">注释原则</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#最好的注释就是没有注释"><span class="nav-number">1.3.1.1.</span> <span class="nav-text">最好的注释就是没有注释</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-注释的作用是帮助理解代码，而不是误解代码"><span class="nav-number">1.3.1.2.</span> <span class="nav-text">原则: 注释的作用是帮助理解代码，而不是误解代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-不要出现todo代码，todo代码自己在个人备忘录记录。"><span class="nav-number">1.3.1.3.</span> <span class="nav-text">原则: 不要出现todo代码，todo代码自己在个人备忘录记录。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-不要临时注释屏蔽代码，直接删除。"><span class="nav-number">1.3.1.4.</span> <span class="nav-text">建议: 不要临时注释屏蔽代码，直接删除。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-不要用注释记录文件修改信息"><span class="nav-number">1.3.1.5.</span> <span class="nav-text">原则: 不要用注释记录文件修改信息</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#注释风格"><span class="nav-number">1.3.2.</span> <span class="nav-text">注释风格</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-单行注释使用-多行注释-文件注释用"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">原则: 单行注释使用 //, 多行注释 /** */, 文件注释用 / \/</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-注释和描述的代码相邻，放在代码上方，并且和代码的缩进一致。"><span class="nav-number">1.3.2.2.</span> <span class="nav-text">原则: 注释和描述的代码相邻，放在代码上方，并且和代码的缩进一致。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-注释要和上方的代码块有间隔，间隔一行。-后空两格。"><span class="nav-number">1.3.2.3.</span> <span class="nav-text">原则: 注释要和上方的代码块有间隔，间隔一行。 // 后空两格。</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#排版"><span class="nav-number">1.4.</span> <span class="nav-text">排版</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#风格"><span class="nav-number">1.4.1.</span> <span class="nav-text">风格</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-团队内风格应该保持一致，大家商量，抛弃个人喜好"><span class="nav-number">1.4.1.1.</span> <span class="nav-text">建议: 团队内风格应该保持一致，大家商量，抛弃个人喜好</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-团队内将风格固化到IDE中，通过eslint，stylelint-editorConfig等来保证一致性。"><span class="nav-number">1.4.1.2.</span> <span class="nav-text">建议: 团队内将风格固化到IDE中，通过eslint，stylelint, editorConfig等来保证一致性。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#缩进"><span class="nav-number">1.4.2.</span> <span class="nav-text">缩进</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-禁止使用制表符作为缩进"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">原则: 禁止使用制表符作为缩进</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-缩进使用2个空格缩进。"><span class="nav-number">1.4.2.2.</span> <span class="nav-text">建议: 缩进使用2个空格缩进。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#换行"><span class="nav-number">1.4.3.</span> <span class="nav-text">换行</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-超长代码需要换行，换行时操作符放在前面"><span class="nav-number">1.4.3.1.</span> <span class="nav-text">建议: 超长代码需要换行，换行时操作符放在前面</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-函数参数尽量在同一行，对于超长的场景每个参数独占一行。"><span class="nav-number">1.4.3.2.</span> <span class="nav-text">建议: 函数参数尽量在同一行，对于超长的场景每个参数独占一行。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-对象字面量超过4个，都应该换行"><span class="nav-number">1.4.3.3.</span> <span class="nav-text">建议: 对象字面量超过4个，都应该换行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-链式调用对象时，一行最好不超过4个调用，可以改成每个独占一行。"><span class="nav-number">1.4.3.4.</span> <span class="nav-text">建议: 链式调用对象时，一行最好不超过4个调用，可以改成每个独占一行。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-else-和-if尾括号放在同一行，else-if同理"><span class="nav-number">1.4.3.5.</span> <span class="nav-text">建议: else 和 if尾括号放在同一行，else if同理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-设置每行的最大长度，超过最大行数需要换行。"><span class="nav-number">1.4.3.6.</span> <span class="nav-text">建议: 设置每行的最大长度，超过最大行数需要换行。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-条件语句过长的，可以将每个条件都放入当都一行，操作符放在开头"><span class="nav-number">1.4.3.7.</span> <span class="nav-text">建议: 条件语句过长的，可以将每个条件都放入当都一行，操作符放在开头</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#空行"><span class="nav-number">1.4.4.</span> <span class="nav-text">空行</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-不同的逻辑块之间空一行"><span class="nav-number">1.4.4.1.</span> <span class="nav-text">原则: 不同的逻辑块之间空一行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-class中，方法和方法之间需要换行。不同逻辑区间的属性之间换行。"><span class="nav-number">1.4.4.2.</span> <span class="nav-text">建议: class中，方法和方法之间需要换行。不同逻辑区间的属性之间换行。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-方法体、块语句、类的开始或者末尾不要有空行。"><span class="nav-number">1.4.4.3.</span> <span class="nav-text">原则: 方法体、块语句、类的开始或者末尾不要有空行。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-一般情况下，不要使用连续空行。"><span class="nav-number">1.4.4.4.</span> <span class="nav-text">建议: 一般情况下，不要使用连续空行。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#空格"><span class="nav-number">1.4.5.</span> <span class="nav-text">空格</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-关键字周围空格一致性"><span class="nav-number">1.4.5.1.</span> <span class="nav-text">建议: 关键字周围空格一致性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#花括号"><span class="nav-number">1.4.6.</span> <span class="nav-text">花括号</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-总是给代码执行体添加"><span class="nav-number">1.4.6.1.</span> <span class="nav-text">建议: 总是给代码执行体添加{}</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-花括号要和语句在一行"><span class="nav-number">1.4.6.2.</span> <span class="nav-text">建议: 花括号要和语句在一行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-对象字面量和数组中使用拖尾逗号"><span class="nav-number">1.4.6.3.</span> <span class="nav-text">建议: 对象字面量和数组中使用拖尾逗号,</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-每行代码句后添加分号。"><span class="nav-number">1.4.6.4.</span> <span class="nav-text">建议: 每行代码句后添加分号。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-单文件长度最好不要超过1500行，尽可能的考虑拆分"><span class="nav-number">1.4.6.5.</span> <span class="nav-text">建议: 单文件长度最好不要超过1500行，尽可能的考虑拆分</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-单个方法长度不要超过50行"><span class="nav-number">1.4.6.6.</span> <span class="nav-text">建议: 单个方法长度不要超过50行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-圈复杂度不要超过20"><span class="nav-number">1.4.6.7.</span> <span class="nav-text">建议: 圈复杂度不要超过20</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-块嵌套深度不超过4层。if语句判断等"><span class="nav-number">1.4.6.8.</span> <span class="nav-text">建议: 块嵌套深度不超过4层。if语句判断等</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-回调深读不超过4层。"><span class="nav-number">1.4.6.9.</span> <span class="nav-text">建议: 回调深读不超过4层。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#变量-1"><span class="nav-number">1.4.7.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-优先使用const，其次let。非特殊场景不使用var"><span class="nav-number">1.4.7.1.</span> <span class="nav-text">原则: 优先使用const，其次let。非特殊场景不使用var</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-在使用地方申明变量，且尽快初始化"><span class="nav-number">1.4.7.2.</span> <span class="nav-text">原则: 在使用地方申明变量，且尽快初始化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-每行申明一个变量，结构和for循环除外"><span class="nav-number">1.4.7.3.</span> <span class="nav-text">原则: 每行申明一个变量，结构和for循环除外</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-申明阶段禁止连续赋值"><span class="nav-number">1.4.7.4.</span> <span class="nav-text">建议: 申明阶段禁止连续赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-变量不需要使用undefined来初始化"><span class="nav-number">1.4.7.5.</span> <span class="nav-text">建议: 变量不需要使用undefined来初始化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-非特殊情况一般使用基础类型的字面量来初始化，而不是封装类型。"><span class="nav-number">1.4.7.6.</span> <span class="nav-text">建议: 非特殊情况一般使用基础类型的字面量来初始化，而不是封装类型。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-内部作用域变量不要覆盖外部作用域变量"><span class="nav-number">1.4.7.7.</span> <span class="nav-text">建议: 内部作用域变量不要覆盖外部作用域变量</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#参数"><span class="nav-number">1.4.8.</span> <span class="nav-text">参数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-方法的参数不超过5个"><span class="nav-number">1.4.8.1.</span> <span class="nav-text">建议: 方法的参数不超过5个</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-函数参数指定默认参数，不是使用-指定默认参数"><span class="nav-number">1.4.8.2.</span> <span class="nav-text">建议: 函数参数指定默认参数，不是使用 || 指定默认参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-永远不要改变参数的值。"><span class="nav-number">1.4.8.3.</span> <span class="nav-text">建议: 永远不要改变参数的值。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-默认参数放在最后面"><span class="nav-number">1.4.8.4.</span> <span class="nav-text">建议: 默认参数放在最后面</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-es6不要使用arguments-请rest替代"><span class="nav-number">1.4.8.5.</span> <span class="nav-text">建议: es6不要使用arguments, 请rest替代</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-对于外部API，始终对参数进行校验。"><span class="nav-number">1.4.8.6.</span> <span class="nav-text">建议: 对于外部API，始终对参数进行校验。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-优先使用参数结构"><span class="nav-number">1.4.8.7.</span> <span class="nav-text">建议: 优先使用参数结构</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#申明与实现"><span class="nav-number">1.4.9.</span> <span class="nav-text">申明与实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-函数申明一致性"><span class="nav-number">1.4.9.1.</span> <span class="nav-text">原则: 函数申明一致性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-匿名函数优先使用箭头函数"><span class="nav-number">1.4.9.2.</span> <span class="nav-text">建议: 匿名函数优先使用箭头函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-箭头函数参数风格一致性"><span class="nav-number">1.4.9.3.</span> <span class="nav-text">原则: 箭头函数参数风格一致性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-箭头函数return风格一致性"><span class="nav-number">1.4.9.4.</span> <span class="nav-text">原则: 箭头函数return风格一致性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-函数有多个返回参数时使用对象解构"><span class="nav-number">1.4.9.5.</span> <span class="nav-text">建议: 函数有多个返回参数时使用对象解构</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类与对象"><span class="nav-number">1.5.</span> <span class="nav-text">类与对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#类-1"><span class="nav-number">1.5.1.</span> <span class="nav-text">类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-优先采用class定义类"><span class="nav-number">1.5.1.1.</span> <span class="nav-text">建议: 优先采用class定义类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-使用extends来实现继承。"><span class="nav-number">1.5.1.2.</span> <span class="nav-text">建议: 使用extends来实现继承。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-构造函数中禁止在super-前调用this或者super-xx"><span class="nav-number">1.5.1.3.</span> <span class="nav-text">原则: 构造函数中禁止在super() 前调用this或者super.xx</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-在构造函数中申明所有的属性和方法。"><span class="nav-number">1.5.1.4.</span> <span class="nav-text">建议: 在构造函数中申明所有的属性和方法。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串"><span class="nav-number">1.5.2.</span> <span class="nav-text">字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-优先使用单引号"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">建议: 优先使用单引号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-字符串使用模板字符串"><span class="nav-number">1.5.2.2.</span> <span class="nav-text">建议: 字符串使用模板字符串</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-不使用-字符串行连续符号。"><span class="nav-number">1.5.2.3.</span> <span class="nav-text">原则: 不使用\字符串行连续符号。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组"><span class="nav-number">1.5.3.</span> <span class="nav-text">数组</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-添加元素使用数组的push方法，而不是索引赋值"><span class="nav-number">1.5.3.1.</span> <span class="nav-text">建议: 添加元素使用数组的push方法，而不是索引赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-不在数组定义非数字索引"><span class="nav-number">1.5.3.2.</span> <span class="nav-text">建议: 不在数组定义非数字索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-数组遍历优先使用数组上方法"><span class="nav-number">1.5.3.3.</span> <span class="nav-text">建议: 数组遍历优先使用数组上方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-除特殊场景，-不要使用for-in遍历数组。"><span class="nav-number">1.5.3.4.</span> <span class="nav-text">建议: 除特殊场景， 不要使用for in遍历数组。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-forEach中不要对数组进行增加删除操作"><span class="nav-number">1.5.3.5.</span> <span class="nav-text">建议: forEach中不要对数组进行增加删除操作</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对象"><span class="nav-number">1.5.4.</span> <span class="nav-text">对象</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-对象字面量属性名统一风格，不加引号。"><span class="nav-number">1.5.4.1.</span> <span class="nav-text">建议: 对象字面量属性名统一风格，不加引号。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-尽量在申明时将所有属性申明好，少动态添加。"><span class="nav-number">1.5.4.2.</span> <span class="nav-text">建议: 尽量在申明时将所有属性申明好，少动态添加。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-对象字面量中，方法使用简写。"><span class="nav-number">1.5.4.3.</span> <span class="nav-text">建议: 对象字面量中，方法使用简写。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-推荐使用对象字面量中使用简写属性"><span class="nav-number">1.5.4.4.</span> <span class="nav-text">建议: 推荐使用对象字面量中使用简写属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-使用-号来访问属性方法，只有动态情况或者数字索引下采用-访问"><span class="nav-number">1.5.4.5.</span> <span class="nav-text">建议: 使用.号来访问属性方法，只有动态情况或者数字索引下采用[]访问</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-get-和-set-必须成对出现，否则没有意义。"><span class="nav-number">1.5.4.6.</span> <span class="nav-text">原则: get 和 set 必须成对出现，否则没有意义。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-禁止在对象上使用Object-proptotype-的内置属性，用call代替"><span class="nav-number">1.5.4.7.</span> <span class="nav-text">原则: 禁止在对象上使用Object.proptotype 的内置属性，用call代替</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-for-in循环对象需要约束"><span class="nav-number">1.5.4.8.</span> <span class="nav-text">建议: for in循环对象需要约束</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-严禁对内置的类型添加修改属性方法。"><span class="nav-number">1.5.4.9.</span> <span class="nav-text">建议: 严禁对内置的类型添加修改属性方法。</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#运算和表达式"><span class="nav-number">1.6.</span> <span class="nav-text">运算和表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#条件表达式"><span class="nav-number">1.6.1.</span> <span class="nav-text">条件表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-条件表达式中，变量在先，表达式在后。"><span class="nav-number">1.6.1.1.</span> <span class="nav-text">建议: 条件表达式中，变量在先，表达式在后。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-总使用-和-，-不使用-和"><span class="nav-number">1.6.1.2.</span> <span class="nav-text">建议: 总使用 === 和 !==， 不使用 == 和 !=</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-条件语句尽量简单"><span class="nav-number">1.6.1.3.</span> <span class="nav-text">建议: 条件语句尽量简单</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-不要在一个复杂的条件表达式最前面添加否定"><span class="nav-number">1.6.1.4.</span> <span class="nav-text">建议: 不要在一个复杂的条件表达式最前面添加否定!</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-非特殊场景，if-else-条件判断不要否定在前"><span class="nav-number">1.6.1.5.</span> <span class="nav-text">建议: 非特殊场景，if else 条件判断不要否定在前</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-禁止使用嵌套的三元表达式"><span class="nav-number">1.6.1.6.</span> <span class="nav-text">建议: 禁止使用嵌套的三元表达式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-混合条件表示式，使用括号来标记运算顺序。"><span class="nav-number">1.6.1.7.</span> <span class="nav-text">建议: 混合条件表示式，使用括号来标记运算顺序。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-每个switch语句总是有default，即使default里面为空"><span class="nav-number">1.6.1.8.</span> <span class="nav-text">建议: 每个switch语句总是有default，即使default里面为空</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-非特殊场景，总是给每个case添加break"><span class="nav-number">1.6.1.9.</span> <span class="nav-text">建议: 非特殊场景，总是给每个case添加break</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-总是给每个case的执行体添加花括号"><span class="nav-number">1.6.1.10.</span> <span class="nav-text">建议: 总是给每个case的执行体添加花括号{}</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#正则"><span class="nav-number">1.6.2.</span> <span class="nav-text">正则</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-正则表达式中不要出现连续空格"><span class="nav-number">1.6.2.1.</span> <span class="nav-text">原则: 正则表达式中不要出现连续空格</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-总是使用具名捕获组"><span class="nav-number">1.6.2.2.</span> <span class="nav-text">建议: 总是使用具名捕获组</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一些特性"><span class="nav-number">1.7.</span> <span class="nav-text">一些特性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#作用域"><span class="nav-number">1.7.1.</span> <span class="nav-text">作用域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-不要在顶层作用域申明函数变量"><span class="nav-number">1.7.1.1.</span> <span class="nav-text">建议: 不要在顶层作用域申明函数变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-谨慎添加window上属性。"><span class="nav-number">1.7.1.2.</span> <span class="nav-text">建议: 谨慎添加window上属性。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数字"><span class="nav-number">1.7.2.</span> <span class="nav-text">数字</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-禁止省略小数点前后的0"><span class="nav-number">1.7.2.1.</span> <span class="nav-text">建议: 禁止省略小数点前后的0</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-使用isNaN-来检查NaN"><span class="nav-number">1.7.2.2.</span> <span class="nav-text">原则: 使用isNaN() 来检查NaN</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异常"><span class="nav-number">1.7.3.</span> <span class="nav-text">异常</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-异常的原则"><span class="nav-number">1.7.3.1.</span> <span class="nav-text">建议: 异常的原则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-promise中reject总是返回异常，而不是其他"><span class="nav-number">1.7.3.2.</span> <span class="nav-text">建议: promise中reject总是返回异常，而不是其他;</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异步"><span class="nav-number">1.7.4.</span> <span class="nav-text">异步</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-不要-return-await写法"><span class="nav-number">1.7.4.1.</span> <span class="nav-text">原则: 不要 return await写法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#杂谈"><span class="nav-number">1.7.5.</span> <span class="nav-text">杂谈</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-一般不使用eval，如果需要，务必需要多人评审。"><span class="nav-number">1.7.5.1.</span> <span class="nav-text">建议: 一般不使用eval，如果需要，务必需要多人评审。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-防止出现隐形eval"><span class="nav-number">1.7.5.2.</span> <span class="nav-text">原则: 防止出现隐形eval</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-非特殊场景不用with"><span class="nav-number">1.7.5.3.</span> <span class="nav-text">原则: 非特殊场景不用with</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#建议-类型转换都用显示的方法处理，不要短符号实现。"><span class="nav-number">1.7.5.4.</span> <span class="nav-text">建议: 类型转换都用显示的方法处理，不要短符号实现。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-DOM卸载时，务必移除事件绑定。"><span class="nav-number">1.7.5.5.</span> <span class="nav-text">原则: DOM卸载时，务必移除事件绑定。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原则-及时清理定时器和延时器"><span class="nav-number">1.7.5.6.</span> <span class="nav-text">原则: 及时清理定时器和延时器</span></a></li></ol></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yangmanman</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">博客全站字数共计&#58;</span>
    
    <span title="博客全站字数共计">89.4k</span>
  
</div>








  <div class="footer-custom">蜀ICP备17019511号-2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: true,
        notify: false,
        appId: 'vuVpRBVLYgITznVd6lB3SmEO-gzGzoHsz',
        appKey: 'joDjKEtGAKgsTOkptN9QqUQA',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>





  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("vuVpRBVLYgITznVd6lB3SmEO-gzGzoHsz", "joDjKEtGAKgsTOkptN9QqUQA");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  

  


  <script type="text/javascript" src="/js/src/baidu.js"></script>
</body>
</html>
